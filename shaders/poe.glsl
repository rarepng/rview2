SPIR-V 1.3 module, <id> bound of 3331

Generator: spiregg from Google - Contact Steven Perron, stevenperron@google.com
Generator Version: 0

Capability(Shader);
Capability(SampledBuffer);
Capability(ImageQuery);



MemoryModel(Logical, GLSL450);

EntryPoint(Fragment, main, "main", {
    in.var.AUTO_PIPJIEKO_LJFPBDMN, 
    in.var.AUTO_CELDJDLE_GEBKIEDD, 
    in.var.AUTO_CEOBGMGP_GEBKIEDD, 
    in.var.COLOR0, 
    in.var.INSTANCEID, 
    _8, 
    in.var.TEXCOORD0, 
    in.var.TEXCOORD1, 
    in.var.TEXCOORD9, 
    out.var.SV_TARGET, 
    out.var.SV_TARGET2, 
    out.var.SV_TARGET3, 
    out.var.SV_TARGET1
  });

ExecutionMode(main, OriginUpperLeft);

Source(HLSL, 600);




struct type.cpass_cb : [[Block]] {
  float4x4 breach_sphere_infos : [[ColMajor, MatrixStride(16), Offset(0)]];
  float4x4 env_map_rotation : [[ColMajor, MatrixStride(16), Offset(64)]];
  float4x4 worldspace_view_proj : [[ColMajor, MatrixStride(16), Offset(128)]];
  float4x4 worldspace_view_proj_inv : [[ColMajor, MatrixStride(16), Offset(192)]];
  float4x4 last_view_projection_transform : [[ColMajor, MatrixStride(16), Offset(256)]];
  float4x4 scene_view_projection_transform : [[ColMajor, MatrixStride(16), Offset(320)]];
  float4x4 scene_view_projection_transform_inv : [[ColMajor, MatrixStride(16), Offset(384)]];
  float4x4 scene_view_projection_transform_nopost : [[ColMajor, MatrixStride(16), Offset(448)]];
  float4x4 scene_view_transform : [[ColMajor, MatrixStride(16), Offset(512)]];
  float4x4 scene_view_transform_inv : [[ColMajor, MatrixStride(16), Offset(576)]];
  float4x4 scene_projection_transform : [[ColMajor, MatrixStride(16), Offset(640)]];
  float4x4 scene_projection_transform_inv : [[ColMajor, MatrixStride(16), Offset(704)]];
  float4 player_position : [[Offset(768)]];
  float4 specular_cube_size : [[Offset(784)]];
  float4 cube_brightness : [[Offset(800)]];
  float4 water_color_terrain : [[Offset(816)]];
  float4 water_color_open : [[Offset(832)]];
  float4 water_wind_direction : [[Offset(848)]];
  float4 ambient_light_color : [[Offset(864)]];
  float4 ambient_light_dir : [[Offset(880)]];
  float4 scene_planar_size : [[Offset(896)]];
  float4 flood_wave_size : [[Offset(912)]];
  float4 shoreline_coord_tex_size : [[Offset(928)]];
  float4 heightmap_world_size : [[Offset(944)]];
  float4 heightmap_tex_size : [[Offset(960)]];
  float4 walkability_tex_size : [[Offset(976)]];
  float4 blight_tex_size : [[Offset(992)]];
  float4 azmeri_planar_minmax : [[Offset(1008)]];
  float4 affliction_pos : [[Offset(1024)]];
  float4 affliction_radii : [[Offset(1040)]];
  float4 infinite_hunger_arena_water_level : [[Offset(1056)]];
  float4 frame_resolution : [[Offset(1072)]];
  float4 frame_to_dynamic_scale : [[Offset(1088)]];
  float4 rain_fall_dir : [[Offset(1104)]];
  float4 clouds_velocity : [[Offset(1120)]];
  float4 ground_scalemove_uv : [[Offset(1136)]];
  float4 dust_color : [[Offset(1152)]];
  float4 fog_vals_exp : [[Offset(1168)]];
  float4 fog_vals_linear : [[Offset(1184)]];
  float4 ssf_color : [[Offset(1200)]];
  int4 volumetric_fx_grid_size : [[Offset(1216)]];
  float4 frame_delta_time : [[Offset(1232)]];
  float3 ground_speed : [[Offset(1248)]];
  uint enable_mvec : [[Offset(1260)]];
  float3 fog_colour_exp : [[Offset(1264)]];
  uint scene_use_parabolic_projection : [[Offset(1276)]];
  float3 fog_colour_linear : [[Offset(1280)]];
  uint use_double_sided : [[Offset(1292)]];
  float3 ssf_layercount_thickness_turbulence : [[Offset(1296)]];
  uint ssgi_detail : [[Offset(1308)]];
  int3 volumetric_fx_grid_pos : [[Offset(1312)]];
  uint gi_self_lighting : [[Offset(1324)]];
  int3 volumetric_fx_grid_emit_pos : [[Offset(1328)]];
  uint fog_linear_enabled : [[Offset(1340)]];
  float3 scene_camera_position : [[Offset(1344)]];
  uint fog_exp_enabled : [[Offset(1356)]];
  float3 scene_camera_right_vector : [[Offset(1360)]];
  uint specular_cube_enabled : [[Offset(1372)]];
  float3 scene_camera_up_vector : [[Offset(1376)]];
  uint diffuse_cube_enabled : [[Offset(1388)]];
  float3 scene_camera_forward_vector : [[Offset(1392)]];
  uint water_debug : [[Offset(1404)]];
  float2 heightmap_world_pos : [[Offset(1408)]];
  uint water_use_downsampling : [[Offset(1416)]];
  uint emulated_platform : [[Offset(1420)]];
  int2 burn_tex_size : [[Offset(1424)]];
  float debug_overlay_strength : [[Offset(1432)]];
  float scene_depth_bias_scale : [[Offset(1436)]];
  float2 ssf_disperse_radius_feathering : [[Offset(1440)]];
  float roof_fade : [[Offset(1448)]];
  float indirect_light_multiplier : [[Offset(1452)]];
  float2 mouse_pos : [[Offset(1456)]];
  uint frame_index : [[Offset(1464)]];
  float exposure : [[Offset(1468)]];
  float water_subsurface_scattering : [[Offset(1472)]];
  float ssgi_debug : [[Offset(1476)]];
  float ssgi_intensity : [[Offset(1480)]];
  float gi_env_occlusion : [[Offset(1484)]];
  float water_refraction_index : [[Offset(1488)]];
  int cascade_atlas_base_size_y : [[Offset(1492)]];
  int cascade_atlas_base_size_x : [[Offset(1496)]];
  int sh_probe_interval : [[Offset(1500)]];
  float water_reflectiveness : [[Offset(1504)]];
  float direct_light_env_ratio : [[Offset(1508)]];
  float tool_time : [[Offset(1512)]];
  float time : [[Offset(1516)]];
  float water_caustics_mult : [[Offset(1520)]];
  int pass_type : [[Offset(1524)]];
  int pass_downscale : [[Offset(1528)]];
  float clouds_post_fade : [[Offset(1532)]];
  float water_wind_intensity : [[Offset(1536)]];
  float clouds_pre_fade : [[Offset(1540)]];
  float clouds_fade_radius : [[Offset(1544)]];
  float clouds_sharpness : [[Offset(1548)]];
  float water_wind_speed : [[Offset(1552)]];
  float clouds_midpoint : [[Offset(1556)]];
  float clouds_intensity : [[Offset(1560)]];
  float clouds_scale : [[Offset(1564)]];
  float water_directionness : [[Offset(1568)]];
  float rain_dist : [[Offset(1572)]];
  float rain_amount : [[Offset(1576)]];
  float rain_turbulence : [[Offset(1580)]];
  float water_swell_intensity : [[Offset(1584)]];
  float rain_intensity : [[Offset(1588)]];
  float lake_mist_intensity : [[Offset(1592)]];
  float depth_sampler_type : [[Offset(1596)]];
  float water_swell_height : [[Offset(1600)]];
  float flow_to_color : [[Offset(1604)]];
  float dist_to_color : [[Offset(1608)]];
  float sum_longitude : [[Offset(1612)]];
  float water_swell_angle : [[Offset(1616)]];
  float current_time : [[Offset(1620)]];
  float numerical_normal : [[Offset(1624)]];
  float water_height_offset : [[Offset(1628)]];
  float water_swell_period : [[Offset(1632)]];
  float water_clarity : [[Offset(1636)]];
  float water_dispersion : [[Offset(1640)]];
  float water_flow_foam : [[Offset(1644)]];
  float water_flow_intensity : [[Offset(1648)]];
}
struct type.cpipeline_cb : [[Block]] {
  float4 alpha_test_desc : [[Offset(0)]];
  float3 constant3_vertex__0 : [[Offset(16)]];
  uint constant_pixel_bool__1 : [[Offset(28)]];
  float3 constant3__1 : [[Offset(32)]];
  uint constant_pixel_bool__2 : [[Offset(44)]];
  float3 constant3_pixel__4 : [[Offset(48)]];
  uint constant_pixel_bool__0 : [[Offset(60)]];
  float2 constant2__1 : [[Offset(64)]];
  uint constant_bool__4 : [[Offset(72)]];
  uint constant_bool__0 : [[Offset(76)]];
  float2 constant2_vertex__3 : [[Offset(80)]];
  uint constant_bool__1 : [[Offset(88)]];
  uint constant_bool__2 : [[Offset(92)]];
  float2 constant2_vertex__2 : [[Offset(96)]];
  uint gpu_particle_dyn_culling : [[Offset(104)]];
  float constant_pixel__19 : [[Offset(108)]];
  float2 constant2__0 : [[Offset(112)]];
  float zero_factor__0 : [[Offset(120)]];
  float constant_pixel__10 : [[Offset(124)]];
  float2 constant2_pixel__3 : [[Offset(128)]];
  float constant_pixel__14 : [[Offset(136)]];
  float constant_pixel__2 : [[Offset(140)]];
  float2 constant2_pixel__2 : [[Offset(144)]];
  float constant_pixel__3 : [[Offset(152)]];
  float constant1__5 : [[Offset(156)]];
  uint frame_material_id : [[Offset(160)]];
  float constant_pixel__4 : [[Offset(164)]];
  float constant_pixel__5 : [[Offset(168)]];
  float scale__0 : [[Offset(172)]];
  float constant1__1 : [[Offset(176)]];
  float constant_vertex__1 : [[Offset(180)]];
  float mult_const__0 : [[Offset(184)]];
}
struct InstanceData {
  float4x4 world_transform : [[ColMajor, MatrixStride(16), Offset(0)]];
  float4x4 prev_world_transform : [[ColMajor, MatrixStride(16), Offset(64)]];
  float4x4 rotation_offset : [[ColMajor, MatrixStride(16), Offset(128)]];
  float4x4 particle_emitter_transform : [[ColMajor, MatrixStride(16), Offset(192)]];
  float4x4 trail_emitter_transform : [[ColMajor, MatrixStride(16), Offset(256)]];
  float4 material_specular_color : [[Offset(320)]];
  int4 dynamic_light_indices : [[Offset(336)]];
  float4 particle_offset : [[Offset(352)]];
  float4 particle_numframes : [[Offset(368)]];
  float4 particle_emitter_pos : [[Offset(384)]];
  float3 cpu_particle_mesh_rotation_offset_min : [[Offset(400)]];
  float gpu_particle_burst : [[Offset(412)]];
  float3 cpu_particle_mesh_rotation_offset_max : [[Offset(416)]];
  float gpu_particle_seed : [[Offset(428)]];
  float3 cpu_particle_mesh_position_offset_min : [[Offset(432)]];
  uint gpu_particle_count : [[Offset(444)]];
  float3 cpu_particle_mesh_position_offset_max : [[Offset(448)]];
  uint gpu_particle_culling_priority : [[Offset(460)]];
  float3 cpu_particle_emitter_rotation_offset_min : [[Offset(464)]];
  uint gpu_particle_pass_count : [[Offset(476)]];
  float3 cpu_particle_emitter_rotation_offset_max : [[Offset(480)]];
  uint gpu_particle_emitter_id : [[Offset(492)]];
  float3 cpu_particle_emitter_position_offset_min : [[Offset(496)]];
  uint gpu_particle_emitter : [[Offset(508)]];
  float3 cpu_particle_emitter_position_offset_max : [[Offset(512)]];
  float material_energy_conservation : [[Offset(524)]];
  float2 gpu_particles_duration : [[Offset(528)]];
  float material_emission : [[Offset(536)]];
  float material_fresnel : [[Offset(540)]];
  float start_time : [[Offset(544)]];
  float material_ambient_occlusion : [[Offset(548)]];
  float material_glossiness : [[Offset(552)]];
  uint object_scene_index : [[Offset(556)]];
  float flip_tangent : [[Offset(560)]];
}
struct type.cobject_cb : [[Block]] {
  uint instance_count : [[Offset(0)]];
  uint batch_size : [[Offset(4)]];
  uint padding0 : [[Offset(8)]];
  uint padding1 : [[Offset(12)]];
  InstanceData[16] instances : [[Offset(16)]] : [[ArrayStride(576)]];
}
struct LightInfo {
  float4x4 light_matrix : [[ColMajor, MatrixStride(16), Offset(0)]];
  float4 light_position : [[Offset(64)]];
  float4 light_direction : [[Offset(80)]];
  float4 light_color : [[Offset(96)]];
  float4 light_type : [[Offset(112)]];
  float4 shadow_scale : [[Offset(128)]];
  float4 shadow_atlas_offset_scale : [[Offset(144)]];
  float4 shadow_enabled : [[Offset(160)]];
}
struct type.StructuredBuffer.LightInfo : [[BufferBlock]] {
  LightInfo[] _child0 : [[Offset(0), NonWritable]] : [[ArrayStride(176)]];
}
struct PointLightInfo {
  float3 position : [[Offset(0)]];
  float channel_index : [[Offset(12)]];
  float3 direction : [[Offset(16)]];
  float dist_threshold : [[Offset(28)]];
  float3 color : [[Offset(32)]];
  float median_radius : [[Offset(44)]];
  float3 padding : [[Offset(48)]];
  float cutoff_radius : [[Offset(60)]];
}
struct type.StructuredBuffer.PointLightInfo : [[BufferBlock]] {
  PointLightInfo[] _child0 : [[Offset(0), NonWritable]] : [[ArrayStride(64)]];
}
struct ParticleEmitterData {
  float3 scale : [[Offset(0)]];
  float emitter_duration : [[Offset(12)]];
  float3 last_scale : [[Offset(16)]];
  uint dead_time : [[Offset(28)]];
  float3 inverse_scale : [[Offset(32)]];
  uint lock_flags : [[Offset(44)]];
  float3 last_inverse_scale : [[Offset(48)]];
  uint speed_factor : [[Offset(60)]];
  float4 rotation : [[Offset(64)]];
  float4 last_rotation : [[Offset(80)]];
  float3 translation : [[Offset(96)]];
  float time : [[Offset(108)]];
  float3 last_translation : [[Offset(112)]];
  float prev_time : [[Offset(124)]];
  uint culling_aggression : [[Offset(128)]];
  uint bones : [[Offset(132)]];
  uint culling_tag : [[Offset(136)]];
  uint particles_start : [[Offset(140)]];
  uint2 custom_data_a : [[Offset(144)]];
  uint2 custom_data_b : [[Offset(152)]];
}
struct type.StructuredBuffer.ParticleEmitterData : [[BufferBlock]] {
  ParticleEmitterData[] _child0 : [[Offset(0), NonWritable]] : [[ArrayStride(160)]];
}
UniformConstant type.sampler* SamplerLinearWrap : [[DescriptorSet(0), Binding(0)]];
UniformConstant type.sampler* SamplerLinearClamp : [[DescriptorSet(0), Binding(1)]];
UniformConstant type.sampler* SamplerDynamicWrap : [[DescriptorSet(0), Binding(7)]];
UniformConstant type.sampler* SamplerLinearWrapNoBias : [[DescriptorSet(0), Binding(8)]];
UniformConstant type.sampler* SamplerLinearClampNoBias : [[DescriptorSet(0), Binding(9)]];
UniformConstant type.sampler* SamplerDepth : [[DescriptorSet(0), Binding(15)]];
Uniform type.cpass_cb* cpass_cb : [[DescriptorSet(3), Binding(0)]];
Uniform type.cpipeline_cb* cpipeline_cb : [[DescriptorSet(4), Binding(0)]];
Uniform type.cobject_cb* cobject_cb : [[DescriptorSet(5), Binding(0)]];
UniformConstant type.cube.image* diffuse_cube : [[DescriptorSet(2), Binding(28)]];
UniformConstant type.cube.image* specular_cube : [[DescriptorSet(2), Binding(29)]];
UniformConstant type.2d.image* noise_sampler : [[DescriptorSet(2), Binding(30)]];
Uniform type.StructuredBuffer.LightInfo* dynamic_light_infos : [[DescriptorSet(2), Binding(44)]];
Uniform type.StructuredBuffer.PointLightInfo* point_light_infos : [[DescriptorSet(2), Binding(45)]];
UniformConstant type.2d.image* tex_shadow_map_atlas : [[DescriptorSet(2), Binding(31)]];
Uniform type.StructuredBuffer.ParticleEmitterData* particles_emitter_data : [[DescriptorSet(2), Binding(46)]];
UniformConstant type.2d.image* input_texture__0 : [[DescriptorSet(2), Binding(32)]];
UniformConstant type.2d.image* input_texture__1 : [[DescriptorSet(2), Binding(33)]];
UniformConstant type.2d.image* input_texture__2 : [[DescriptorSet(2), Binding(34)]];
UniformConstant type.2d.image* input_texture__3 : [[DescriptorSet(2), Binding(35)]];
UniformConstant type.2d.image* lod_texture__3 : [[DescriptorSet(2), Binding(36)]];
UniformConstant type.2d.image* subsurface_tex__0 : [[DescriptorSet(2), Binding(37)]];
UniformConstant type.2d.image* scatter_lookup_tex__0 : [[DescriptorSet(2), Binding(38)]];
UniformConstant type.2d.image* screenspace_shadowmap : [[DescriptorSet(2), Binding(39)]];
UniformConstant type.2d.image* ambient_light_tex : [[DescriptorSet(2), Binding(40)]];
UniformConstant type.2d.image* light_lookup : [[DescriptorSet(2), Binding(41)]];
UniformConstant type.buffer.image* light_indices : [[DescriptorSet(2), Binding(42)]];
UniformConstant type.2d.image* environment_ggx_sampler : [[DescriptorSet(2), Binding(43)]];
Input float4* in.var.AUTO_PIPJIEKO_LJFPBDMN : [[Location(0)]];
Input float2* in.var.AUTO_CELDJDLE_GEBKIEDD : [[Location(1)]];
Input float3* in.var.AUTO_CEOBGMGP_GEBKIEDD : [[Location(2)]];
Input float4* in.var.COLOR0 : [[Location(3)]];
Input uint* in.var.INSTANCEID : [[Location(4), Flat]];
Input float4* _8 : [[BuiltIn(FragCoord)]];
Input float4* in.var.TEXCOORD0 : [[Location(5)]];
Input float2* in.var.TEXCOORD1 : [[Location(6)]];
Input float4* in.var.TEXCOORD9 : [[Location(10)]];
Output float4* out.var.SV_TARGET : [[Location(0)]];
Output float4* out.var.SV_TARGET2 : [[Location(2)]];
Output float4* out.var.SV_TARGET3 : [[Location(3)]];
Output float4* out.var.SV_TARGET1 : [[Location(1)]];

void main() {
  float4 _269 = *in.var.AUTO_PIPJIEKO_LJFPBDMN;
  float2 _270 = *in.var.AUTO_CELDJDLE_GEBKIEDD;
  float3 _271 = *in.var.AUTO_CEOBGMGP_GEBKIEDD;
  float4 _272 = *in.var.COLOR0;
  uint _273 = *in.var.INSTANCEID;
  float4 _274 = *_8;
  float4 _275 = *in.var.TEXCOORD0;
  float2 _276 = *in.var.TEXCOORD1;
  float4 _277 = *in.var.TEXCOORD9;
  float3 _278 = _275.xyz;
  float3 _279 = DPdx(_278);
  float3 _280 = DPdy(_278);
  float3x2 _281 = CompositeConstruct({_279, _280});
  float2 _282 = DPdx(_276);
  float2 _283 = DPdy(_276);
  float _284 = _282.x;
  float _285 = _283.y;
  float _286 = _284 * _285;
  float _287 = _282.y;
  float _288 = _283.x;
  float _289 = _287 * _288;
  float _290 = _286 - _289;
  float _291 = -_287;
  float _292 = -_288;
  float2 _293 = CompositeConstruct({_285, _291});
  float2 _294 = CompositeConstruct({_292, _284});
  float2 _295 = CompositeConstruct({_290, _290});
  float2 _296 = _293 / _295;
  float2 _297 = _294 / _295;
  float2x2 _298 = CompositeConstruct({_296, _297});
  float3x2 _299 = _281 * _298;
  float3 _300 = _299[0];
  float3 _301 = _299[1];
  float3 _302 = GLSL.std.450::Cross(_300, _301);
  float3* _303 = &cpass_cb.scene_camera_position;
  float3 _304 = *_303;
  float3 _305 = _278 - _304;
  float _306 = Dot(_302, _305);
  bool _307 = _306 > 0.0000;
  
  if(_307) {
    float3 _310 = _302 * -1.0000;
  }

  float3 _311 = Phi(_302, _310);
  float3 _312 = GLSL.std.450::Normalize(_300);
  float3 _313 = -_301;
  float3 _314 = GLSL.std.450::Normalize(_313);
  float3 _315 = GLSL.std.450::Normalize(_311);
  type.2d.image _316 = *input_texture__0;
  type.sampler _317 = *SamplerLinearWrap;
  type.sampled.image _318 = SampledImage(_316, _317);
  float4 _319 = ImageSampleImplicitLod(_318, _276, );
  float4 _320 = _319 * _269;
  float _321 = GLSL.std.450::FAbs(1000.0000);
  bool _322 = _321 > 0.0000;
  
  if(_322) {
    float _326 = _275.x;
    float _327 = _326 * 0.0010;
  } else {
  }

  float _328 = Phi(_327, 0.0000);
  
  if(!_322) {
  } else {
    float _332 = _275.y;
    float _333 = _332 * 0.0010;
  }

  float _334 = Phi(_333, 0.0000);
  float2 _335 = CompositeConstruct({_328, _334});
  type.2d.image _336 = *input_texture__1;
  type.sampled.image _337 = SampledImage(_336, _317);
  float4 _338 = ImageSampleImplicitLod(_337, _335, );
  float _339 = _320.w;
  type.2d.image _340 = *input_texture__2;
  type.sampled.image _341 = SampledImage(_340, _317);
  float4 _342 = ImageSampleImplicitLod(_341, _335, );
  float _343 = _342.x;
  float _344 = _342.y;
  float* _345 = &cpipeline_cb.scale__0;
  float _346 = *_345;
  float2 _347 = CompositeConstruct({_343, _344});
  float2 _348 = _347 * 2.0000;
  float2 _349 = _348 - {1.0000, 1.0000};
  float2 _350 = _349 * _346;
  float3 _351 = float3(_350.x, _350.y, {0.0000, 0.0000, 0.0000}.z);
  float2 _352 = _350.xy;
  float _353 = Dot(_352, _352);
  float _354 = 1.0000 - _353;
  float _355 = GLSL.std.450::NMax(_354, 0.0000);
  float _356 = GLSL.std.450::Sqrt(_355);
  float3 _357 = CompositeInsert(_356, _351, {2});
  uint* _358 = &cpipeline_cb.constant_pixel_bool__0;
  uint _359 = *_358;
  bool _360 = _359 != 0;
  float _361 = _342.w;
  float _362 = 1.0000 - _361;
  float _363 = Select(_360, 1.0000, 0.0000);
  float _364 = GLSL.std.450::FMix(_361, _362, _363);
  float _365 = _342.z;
  float _366 = _272.w;
  float _367 = _339 * _366;
  float* _368 = &cpipeline_cb.constant_pixel__5;
  float _369 = *_368;
  float* _370 = &cpipeline_cb.constant_pixel__4;
  float _371 = *_370;
  float* _372 = &cpipeline_cb.constant1__5;
  float _373 = *_372;
  float _374 = GLSL.std.450::Cos(_373);
  float _375 = _270.x;
  float _376 = _375 - 0.5000;
  float _377 = _374 * _376;
  float _378 = GLSL.std.450::Sin(_373);
  float _379 = _270.y;
  float _380 = _379 - 0.5000;
  float _381 = _378 * _380;
  float _382 = _377 + _381;
  float _383 = _382 + 0.5000;
  float _384 = -_378;
  float _385 = _384 * _376;
  float _386 = _374 * _380;
  float _387 = _385 + _386;
  float _388 = _387 + 0.5000;
  float2 _389 = CompositeConstruct({_383, _388});
  type.2d.image _390 = *input_texture__3;
  type.sampled.image _391 = SampledImage(_390, _317);
  float4 _392 = ImageSampleImplicitLod(_391, _389, );
  float* _393 = &cpipeline_cb.constant_pixel__3;
  float _394 = *_393;
  float* _395 = &cpipeline_cb.constant_pixel__2;
  float _396 = *_395;
  float _397 = _392.x;
  float _398 = _392.y;
  float _399 = GLSL.std.450::FMix(_397, _398, _396);
  float _400 = _392.z;
  float _401 = GLSL.std.450::FMix(_399, _400, _394);
  float _402 = _392.w;
  float _403 = GLSL.std.450::FMix(_401, _402, _371);
  float _404 = _403 * 0.5000;
  float _405 = _404 + 0.5000;
  float _406 = GLSL.std.450::FMix(_403, _405, _369);
  float _407 = _367 * _406;
  float _408 = GLSL.std.450::FClamp(_407, 0.0000, 1.0000);
  float _409 = GLSL.std.450::NMax(0.0010, 0.1677);
  float _410 = 2.0000 / _409;
  float _411 = _410 - 1.0000;
  float _412 = GLSL.std.450::FClamp(_411, -100000.0000, 100000.0000);
  float _413 = GLSL.std.450::NMax(0.2360, _408);
  float _414 = 1.0000 - _413;
  float _415 = _414 * 1.3089;
  float _416 = GLSL.std.450::FClamp(_415, 0.0000, 1.0000);
  float _417 = GLSL.std.450::Pow(_416, _412);
  float _418 = _417 * -0.7640;
  float _419 = GLSL.std.450::NMin(0.2360, _408);
  float _420 = _419 * 4.2373;
  float _421 = GLSL.std.450::FClamp(_420, 0.0000, 1.0000);
  float _422 = GLSL.std.450::Pow(_421, _412);
  float _423 = _422 * 0.2360;
  float _424 = _418 + _423;
  float _425 = 0.7640 + _424;
  bool _426 = IsNan(_425);
  float _427 = Select(_426, 0.2360, _425);
  float _428 = GLSL.std.450::FClamp(_427, 0.0000, 1.0000);
  float3x3 _429 = CompositeConstruct({_312, _314, _315});
  float3 _430 = _429 * _357;
  float* _431 = &cpipeline_cb.constant_pixel__14;
  float _432 = *_431;
  float _433 = GLSL.std.450::FAbs(_366);
  float _434 = GLSL.std.450::NMax(_433, 0.0000);
  float _435 = GLSL.std.450::Pow(_434, 16.0000);
  float _436 = _435 * 15.0000;
  float _437 = GLSL.std.450::FMix(_436, 15.0000, _432);
  float _438 = 1.0000 - _366;
  float _439 = _438 * 6.0000;
  float* _440 = &cpipeline_cb.constant_pixel__10;
  float _441 = *_440;
  float* _442 = &cpipeline_cb.zero_factor__0;
  float _443 = *_442;
  float _444 = 1.0000 - _443;
  float3 _445 = _304 - _278;
  float3 _446 = GLSL.std.450::Normalize(_445);
  float _447 = Dot(_446, _430);
  float _448 = 1.0000 - _447;
  float _449 = GLSL.std.450::FClamp(_448, 0.0000, 1.0000);
  float _450 = GLSL.std.450::Pow(_449, 5.0000);
  float _451 = _444 * _450;
  float _452 = _443 + _451;
  float _453 = GLSL.std.450::FClamp(_452, 0.0000, 1.0000);
  float _454 = 1.0000 - _453;
  float _455 = GLSL.std.450::NMax(0.0010, 0.2500);
  float _456 = 2.0000 / _455;
  float _457 = _456 - 1.0000;
  float _458 = GLSL.std.450::FClamp(_457, -100000.0000, 100000.0000);
  float _459 = GLSL.std.450::NMax(1.8500, _454);
  float _460 = 1.0000 - _459;
  float _461 = _460 * -1.1765;
  float _462 = GLSL.std.450::FClamp(_461, 0.0000, 1.0000);
  float _463 = GLSL.std.450::Pow(_462, _458);
  float _464 = _463 * 0.8500;
  float _465 = GLSL.std.450::NMin(1.8500, _454);
  float _466 = _465 * 0.5405;
  float _467 = GLSL.std.450::FClamp(_466, 0.0000, 1.0000);
  float _468 = GLSL.std.450::Pow(_467, _458);
  float _469 = _468 * 1.8500;
  float _470 = _464 + _469;
  float _471 = -0.8500 + _470;
  bool _472 = IsNan(_471);
  float _473 = Select(_472, 1.8500, _471);
  float _474 = GLSL.std.450::FMix(_453, _473, _441);
  float _475 = GLSL.std.450::FAbs(_474);
  float _476 = GLSL.std.450::NMax(_475, 0.0000);
  float _477 = GLSL.std.450::Pow(_476, _439);
  float _478 = _477 * _437;
  float3 _479 = CompositeConstruct({_478, _478, _478});
  float3 _480 = GLSL.std.450::FMix({0.0000, 0.0000, 0.0000}, {0.3354, -0.1000, -0.2000}, _479);
  uint* _481 = &cpipeline_cb.constant_pixel_bool__2;
  uint _482 = *_481;
  bool _483 = _482 != 0;
  uint* _484 = &cpipeline_cb.constant_pixel_bool__1;
  uint _485 = *_484;
  bool _486 = _485 != 0;
  uint* _487 = &cobject_cb.instance_count;
  uint _488 = *_487;
  uint _489 = _273 / _488;
  uint* _490 = &cobject_cb.instances[_489].gpu_particle_emitter;
  uint _491 = *_490;
  float3* _492 = &particles_emitter_data._child0[_491].translation;
  float3 _493 = *_492;
  uint* _494 = &particles_emitter_data._child0[_491].lock_flags;
  uint _495 = *_494;
  uint _496 = _495 & 8;
  bool _497 = _496 != 0;
  
  if(_497) {
    float* _500 = &particles_emitter_data._child0[_491].scale.x;
    float _501 = *_500;
    float _502 = GLSL.std.450::FAbs(_501);
  }

  float _503 = Phi(1.0000, _502);
  float3 _504 = _278 - _493;
  float3 _505 = float3(_504.x, _504.y, {0.0000, 0.0000, 0.0000}.z);
  float _506 = GLSL.std.450::Length(_505);
  float3* _507 = &cpipeline_cb.constant3__1;
  float3 _508 = *_507;
  float3 _509 = _508 * 100.0000;
  float3 _510 = _277.xyz;
  float3 _511 = _510 + _509;
  float _512 = GLSL.std.450::Length(_511);
  float _513 = Select(_486, 1.0000, 0.0000);
  float _514 = GLSL.std.450::FMix(_512, _506, _513);
  float _515 = GLSL.std.450::FAbs(_503);
  bool _516 = _515 > 0.0000;
  
  if(_516) {
    float _520 = 0.0017 / _503;
  } else {
  }

  float _521 = Phi(_520, 0.0000);
  float _522 = GLSL.std.450::FMix(1.7143, _521, _513);
  float _523 = _522 * _514;
  float _524 = GLSL.std.450::Sin(_523);
  float _525 = GLSL.std.450::NMax(0.0010, 0.2050);
  float _526 = 2.0000 / _525;
  float _527 = _526 - 1.0000;
  float _528 = GLSL.std.450::FClamp(_527, -100000.0000, 100000.0000);
  float _529 = GLSL.std.450::NMax(0.4500, _524);
  float _530 = 1.0000 - _529;
  float _531 = _530 * 1.8182;
  float _532 = GLSL.std.450::FClamp(_531, 0.0000, 1.0000);
  float _533 = GLSL.std.450::Pow(_532, _528);
  float _534 = _533 * -0.5500;
  float _535 = GLSL.std.450::NMin(0.4500, _524);
  float _536 = _535 * 2.2222;
  float _537 = GLSL.std.450::FClamp(_536, 0.0000, 1.0000);
  float _538 = GLSL.std.450::Pow(_537, _528);
  float _539 = _538 * 0.4500;
  float _540 = _534 + _539;
  float _541 = 0.5500 + _540;
  bool _542 = IsNan(_541);
  float _543 = Select(_542, 0.4500, _541);
  float _544 = 1.0000 - _543;
  float _545 = Select(_483, 1.0000, 0.0000);
  float _546 = GLSL.std.450::FMix(_543, _544, _545);
  float3 _547 = CompositeConstruct({_546, _546, _546});
  float3 _548 = _480 * _547;
  float3 _549 = -_314;
  float3* _550 = &cpipeline_cb.constant3_pixel__4;
  float3 _551 = *_550;
  float* _552 = &cpipeline_cb.constant_pixel__19;
  float _553 = *_552;
  type.2d.image _554 = *lod_texture__3;
  type.sampler _555 = *SamplerDynamicWrap;
  float _556 = _276.x;
  float _557 = _276.y;
  float4 _558 = CompositeConstruct({_556, _557, 0.0000, _553});
  float2 _559 = _558.xy;
  type.sampled.image _560 = SampledImage(_554, _555);
  float4 _561 = ImageSampleExplicitLod(_560, _559, Lod(_553));
  float _562 = _561.x;
  float _563 = 1.0000 - _562;
  float2* _564 = &cpipeline_cb.constant2_pixel__3;
  float2 _565 = *_564;
  float _566 = _565.x;
  float _567 = _565.y;
  float _568 = 1.0000 - _567;
  float _569 = GLSL.std.450::NMax(0.0010, _568);
  float _570 = 2.0000 / _569;
  float _571 = _570 - 1.0000;
  float _572 = GLSL.std.450::FClamp(_571, -100000.0000, 100000.0000);
  float _573 = 1.0000 - _566;
  float _574 = GLSL.std.450::NMax(_566, _563);
  float _575 = 1.0000 - _574;
  float _576 = _575 / _573;
  float _577 = GLSL.std.450::FClamp(_576, 0.0000, 1.0000);
  float _578 = GLSL.std.450::Pow(_577, _572);
  float _579 = -_578;
  float _580 = _579 * _573;
  float _581 = GLSL.std.450::NMin(_566, _563);
  float _582 = _581 / _566;
  float _583 = GLSL.std.450::FClamp(_582, 0.0000, 1.0000);
  float _584 = GLSL.std.450::Pow(_583, _572);
  float _585 = _584 * _566;
  float _586 = _580 + _585;
  float _587 = _573 + _586;
  bool _588 = IsNan(_587);
  float _589 = Select(_588, _566, _587);
  float3 _590 = CompositeConstruct({_589, _589, _589});
  float3 _591 = _590 * _551;
  float2* _592 = &cpipeline_cb.constant2_pixel__2;
  float2 _593 = *_592;
  float _594 = _593.x;
  float _595 = _593.y;
  float _596 = 1.0000 - _595;
  float _597 = GLSL.std.450::NMax(0.0010, _596);
  float _598 = 2.0000 / _597;
  float _599 = _598 - 1.0000;
  float _600 = GLSL.std.450::FClamp(_599, -100000.0000, 100000.0000);
  float _601 = 1.0000 - _594;
  float _602 = GLSL.std.450::NMax(_594, _562);
  float _603 = 1.0000 - _602;
  float _604 = _603 / _601;
  float _605 = GLSL.std.450::FClamp(_604, 0.0000, 1.0000);
  float _606 = GLSL.std.450::Pow(_605, _600);
  float _607 = -_606;
  float _608 = _607 * _601;
  float _609 = GLSL.std.450::NMin(_594, _562);
  float _610 = _609 / _594;
  float _611 = GLSL.std.450::FClamp(_610, 0.0000, 1.0000);
  float _612 = GLSL.std.450::Pow(_611, _600);
  float _613 = _612 * _594;
  float _614 = _608 + _613;
  float _615 = _601 + _614;
  bool _616 = IsNan(_615);
  float _617 = Select(_616, _594, _615);
  float3 _618 = CompositeConstruct({_617, _617, _617});
  float3 _619 = _618 * {0.0400, 0.2500, 0.3300};
  float3 _620 = _619 + _591;
  float _621 = GLSL.std.450::NMax(0.0010, 0.6273);
  float _622 = 2.0000 / _621;
  float _623 = _622 - 1.0000;
  float _624 = GLSL.std.450::FClamp(_623, -100000.0000, 100000.0000);
  float _625 = GLSL.std.450::NMax(0.5000, _562);
  float _626 = 1.0000 - _625;
  float _627 = _626 * 2.0000;
  float _628 = GLSL.std.450::FClamp(_627, 0.0000, 1.0000);
  float _629 = GLSL.std.450::Pow(_628, _624);
  float _630 = _629 * -0.5000;
  float _631 = GLSL.std.450::NMin(0.5000, _562);
  float _632 = _631 * 2.0000;
  float _633 = GLSL.std.450::FClamp(_632, 0.0000, 1.0000);
  float _634 = GLSL.std.450::Pow(_633, _624);
  float _635 = _634 * 0.5000;
  float _636 = _630 + _635;
  float _637 = 0.5000 + _636;
  bool _638 = IsNan(_637);
  float _639 = Select(_638, 0.5000, _637);
  float _640 = 0.4348 * _639;
  float _641 = GLSL.std.450::FAbs(0.4348);
  bool _642 = _641 > 0.0000;
  float _643 = Select(_642, 2.2999, 0.0000);
  float _644 = 0.3357 * _643;
  float _645 = 0.1491 * _643;
  type.2d.image _646 = *subsurface_tex__0;
  type.2d.image _647 = *scatter_lookup_tex__0;
  type.sampler _648 = *SamplerLinearClamp;
  float _649 = _312.x;
  float _650 = _549.y;
  float _651 = _315.z;
  float _652 = _650 * _651;
  float _653 = _315.y;
  float _654 = _549.z;
  float _655 = _653 * _654;
  float _656 = _652 - _655;
  float _657 = _649 * _656;
  float _658 = _312.y;
  float _659 = _549.x;
  float _660 = _659 * _651;
  float _661 = _315.x;
  float _662 = _654 * _661;
  float _663 = _660 - _662;
  float _664 = _658 * _663;
  float _665 = _657 - _664;
  float _666 = _312.z;
  float _667 = _659 * _653;
  float _668 = _650 * _661;
  float _669 = _667 - _668;
  float _670 = _666 * _669;
  float _671 = _665 + _670;
  float _672 = 1.0000 / _671;
  float _673 = _656 * _672;
  float _674 = _666 * _653;
  float _675 = _658 * _651;
  float _676 = _674 - _675;
  float _677 = _676 * _672;
  float _678 = _658 * _654;
  float _679 = _666 * _650;
  float _680 = _678 - _679;
  float _681 = _680 * _672;
  float3 _682 = CompositeConstruct({_673, _677, _681});
  float _683 = _662 - _660;
  float _684 = _683 * _672;
  float _685 = _649 * _651;
  float _686 = _666 * _661;
  float _687 = _685 - _686;
  float _688 = _687 * _672;
  float _689 = _659 * _666;
  float _690 = _649 * _654;
  float _691 = _689 - _690;
  float _692 = _691 * _672;
  float3 _693 = CompositeConstruct({_684, _688, _692});
  float _694 = _661 * _650;
  float _695 = _667 - _694;
  float _696 = _695 * _672;
  float _697 = _661 * _658;
  float _698 = _649 * _653;
  float _699 = _697 - _698;
  float _700 = _699 * _672;
  float _701 = _649 * _650;
  float _702 = _659 * _658;
  float _703 = _701 - _702;
  float _704 = _703 * _672;
  float3 _705 = CompositeConstruct({_696, _700, _704});
  float3x3 _706 = CompositeConstruct({_682, _693, _705});
  float3 _707 = GLSL.std.450::Normalize(_305);
  float _708 = GLSL.std.450::NMax(1.0000, 1.3300);
  float _709 = 1.0000 / _708;
  float _710 = Dot(_707, _430);
  float _711 = -_710;
  float _712 = _709 * _709;
  float _713 = _711 * _711;
  float _714 = 1.0000 - _713;
  float _715 = _712 * _714;
  float _716 = 1.0000 - _715;
  bool _717 = _716 > 0.0000;
  
  if(_717) {
    float3 _720 = _707 * _709;
    float _721 = _709 * _711;
    float _722 = GLSL.std.450::Sqrt(_716);
    float _723 = _721 - _722;
    float3 _724 = _430 * _723;
    float3 _725 = _720 + _724;
  }

  float3 _726 = Phi(_707, _725);
  float3 _727 = _706 * _726;
  float _728 = Dot(_726, _430);
  float _729 = GLSL.std.450::FAbs(_728);
  float _730 = _729 + 0.0000;
  float _731 = GLSL.std.450::FAbs(_730);
  float _732 = _640 / _731;
  float2 _733 = _727.xy;
  float2 _734 = _733 * _732;
  float _735 = _645 + 0.0000;
  float _736 = 1.0000 / _735;
  float _737 = _736 / _640;
  float _738 = _737 + 1.0000;
  float _739 = 1.0000 / _738;
  float _740 = GLSL.std.450::FClamp(_739, 0.0000, 1.0000);
  float4 _741 = CompositeConstruct({_729, _740, 0.0000, 0.0000});
  float2 _742 = _741.xy;
  type.sampled.image _743 = SampledImage(_647, _648);
  float4 _744 = ImageSampleExplicitLod(_743, _742, Lod(0.0000));
  float _745 = _744.x;
  float _746 = _744.y;
  float _747 = _640 * _746;
  float2 _748 = _734 * 1.0000;
  float2 _749 = _276 + _748;
  float2 _750 = _734 * 1.0497;
  float2 _751 = _276 + _750;
  float2 _752 = _734 * 1.0994;
  float2 _753 = _276 + _752;
  float _754 = _749.x;
  float _755 = _749.y;
  float4 _756 = CompositeConstruct({_754, _755, 0.0000, 0.0000});
  float2 _757 = _756.xy;
  type.sampled.image _758 = SampledImage(_646, _555);
  float4 _759 = ImageSampleExplicitLod(_758, _757, Lod(0.0000));
  float3 _760 = _759.xyz;
  float3 _761 = _760 * {1.0000, 0.0000, 0.0000};
  float _762 = _751.x;
  float _763 = _751.y;
  float4 _764 = CompositeConstruct({_762, _763, 0.0000, 0.0000});
  float2 _765 = _764.xy;
  type.sampled.image _766 = SampledImage(_646, _555);
  float4 _767 = ImageSampleExplicitLod(_766, _765, Lod(0.0000));
  float3 _768 = _767.xyz;
  float3 _769 = _768 * {0.0000, 1.0000, 0.0000};
  float3 _770 = _761 + _769;
  float _771 = _753.x;
  float _772 = _753.y;
  float4 _773 = CompositeConstruct({_771, _772, 0.0000, 0.0000});
  float2 _774 = _773.xy;
  type.sampled.image _775 = SampledImage(_646, _555);
  float4 _776 = ImageSampleExplicitLod(_775, _774, Lod(0.0000));
  float3 _777 = _776.xyz;
  float3 _778 = _777 * {0.0000, 0.0000, 1.0000};
  float3 _779 = _770 + _778;
  float _780 = -_747;
  float _781 = _780 * _644;
  float _782 = GLSL.std.450::Exp(_781);
  float3 _783 = CompositeConstruct({_782, _782, _782});
  float3 _784 = GLSL.std.450::FMix({0.5714, 0.6584, 0.8944}, {1.0000, 1.0000, 1.0000}, _783);
  float3 _785 = CompositeConstruct({_745, _745, _745});
  float3 _786 = GLSL.std.450::Pow({0.4472, 0.6087, 1.0932}, _785);
  float3 _787 = _786 * _779;
  float3 _788 = _787 * _784;
  float3 _789 = _788 * _620;
  float3 _790 = _789 + _548;
  float _791 = GLSL.std.450::Length(_430);
  float _792 = GLSL.std.450::NMax(0.0000, _791);
  float3 _793 = CompositeConstruct({_792, _792, _792});
  float3 _794 = _430 / _793;
  float3 _795 = GLSL.std.450::Reflect(_707, _794);
  float4x4* _796 = &cpass_cb.scene_view_projection_transform;
  float4x4 _797 = *_796;
  float4 _798 = float4(_275.x, _275.y, _275.z, float4(Undef).w);
  float4 _799 = CompositeInsert(1.0000, _798, {3});
  float4 _800 = _797 * _799;
  float _801 = _800.w;
  float4 _802 = CompositeConstruct({_801, _801, _801, _801});
  float4 _803 = _800 / _802;
  float2 _804 = _803.xy;
  float2 _805 = _804 * 0.5000;
  float2 _806 = _805 + {0.5000, 0.5000};
  float _807 = _806.y;
  float _808 = 1.0000 - _807;
  float _809 = _806.x;
  float3 _810 = CompositeConstruct({_809, _808, float(Undef)});
  float4* _811 = &cpass_cb.frame_resolution;
  float4 _812 = *_811;
  float2 _813 = _812.xy;
  float2 _814 = _813 + {0.5000, 0.5000};
  uint2 _815 = ConvertFToU(_814);
  int2 _816 = Bitcast(_815);
  int _817 = _816.x;
  uint _818 = Bitcast(_817);
  uint _819 = _818 / 1;
  float _820 = ConvertUToF(_819);
  int _821 = _816.y;
  uint _822 = Bitcast(_821);
  uint _823 = _822 / 1;
  float _824 = ConvertUToF(_823);
  float2 _825 = CompositeConstruct({_820, _824});
  float2 _826 = {1.0000, 1.0000} / _825;
  float4* _827 = &cpass_cb.frame_to_dynamic_scale;
  float4 _828 = *_827;
  float2 _829 = _828.xy;
  float2 _830 = _826 / _829;
  float2 _831 = _810.xy;
  float2 _832 = _831 / _830;
  float2 _833 = _832 * _826;
  type.2d.image _834 = *ambient_light_tex;
  float _835 = _833.x;
  float _836 = _833.y;
  float4 _837 = CompositeConstruct({_835, _836, 0.0000, 0.0000});
  float2 _838 = _837.xy;
  type.sampled.image _839 = SampledImage(_834, _648);
  float4 _840 = ImageSampleExplicitLod(_839, _838, Lod(0.0000));
  float3 _841 = _840.xyz;
  float3 _842 = _841 * 5.0000;
  float4 _843 = float4(_842.x, _842.y, _842.z, float4(Undef).w);
  float _844 = _840.w;
  float _845 = _365 * _844;
  float4 _846 = CompositeInsert(_845, _843, {3});
  type.2d.image _847 = *screenspace_shadowmap;
  type.sampled.image _848 = SampledImage(_847, _648);
  float4 _849 = ImageSampleExplicitLod(_848, _838, Lod(0.0000));
  float _850 = _849.x;
  float _851 = _850 * 0.0001;
  float4 _852 = CompositeConstruct({_851, _851, _851, _851});
  float4 _853 = _846 + _852;
  float2 _854 = _274.xy;
  int2 _855 = ConvertFToS(_854);
  int* _856 = &cpass_cb.pass_downscale;
  int _857 = *_856;
  int2 _858 = CompositeConstruct({_857, _857});
  int2 _859 = _855 * _858;
  int2 _860 = _859 >> {6, 6};
  int _861 = _860.x;
  int _862 = _860.y;
  int3 _863 = CompositeConstruct({_861, _862, 0});
  int2 _864 = _863.xy;
  type.2d.image _865 = *light_lookup;
  uint4 _866 = ImageFetch(_865, _864, Lod(0));
  uint _867 = _866.x;
  uint _868 = _866.y;

  while(true) {
    uint _870 = Phi(_867, _871);
    float3 _873 = Phi({0.0000, 0.0000, 0.0000}, _874);
    float3 _875 = Phi({0.0000, 0.0000, 0.0000}, _876);
    float3 _877 = Phi({0.0000, 0.0000, 0.0000}, _878);
    float3 _879 = Phi({0.0000, 0.0000, 0.0000}, _880);
    uint _881 = Phi(0, _882);
    bool _883 = _881 < _868;
    if(!_883) break;
    uint _871 = _870 + 1;
    type.buffer.image _886 = *light_indices;
    uint4 _887 = ImageFetch(_886, _870, );
    uint _888 = _887.x;
    float* _889 = &point_light_infos._child0[_888].channel_index;
    float _890 = *_889;
    bool _891 = _890 > -0.5000;
    
    if(_891) {
      bool _894 = _890 >= 2.5000;
      
      if(_894) {
      } else {
        bool _898 = _890 >= 1.5000;
        
        if(_898) {
        } else {
          bool _902 = _890 >= 0.5000;
          bool _903 = CompositeConstruct({_902, _902, _902, _902});
          float4 _904 = Select(_903, {0.0000, 1.0000, 0.0000, 0.0000}, {1.0000, 0.0000, 0.0000, 0.0000});
        }

        float4 _905 = Phi({0.0000, 0.0000, 1.0000, 0.0000}, _904);
      }

      float4 _906 = Phi({0.0000, 0.0000, 0.0000, 1.0000}, _905);
    }

    float4 _907 = Phi({0.0000, 0.0000, 0.0000, 0.0000}, _906);
    float _908 = Dot(_849, _907);
    float3* _909 = &point_light_infos._child0[_888].position;
    float3 _910 = *_909;
    float _911 = *_889;
    float _912 = _910.x;
    float _913 = _910.y;
    float _914 = _910.z;
    float4 _915 = CompositeConstruct({_912, _913, _914, _911});
    float3* _916 = &point_light_infos._child0[_888].color;
    float3 _917 = *_916;
    float* _918 = &point_light_infos._child0[_888].median_radius;
    float _919 = *_918;
    float _920 = _917.x;
    float _921 = _917.y;
    float _922 = _917.z;
    float4 _923 = CompositeConstruct({_920, _921, _922, _919});
    float3 _924 = _915.xyz;
    float3 _925 = _924 - _278;
    float _926 = GLSL.std.450::Length(_925);
    float3 _927 = CompositeConstruct({_926, _926, _926});
    float3 _928 = _925 / _927;
    float _929 = GLSL.std.450::FClamp(_911, 0.0000, 1.0000);
    float _930 = GLSL.std.450::FMix(100.0000, 7.0711, _929);
    float _931 = 0.2000 * _930;
    float _932 = _931 * _930;
    float _933 = _919 / _930;
    float _934 = _926 / _933;
    float _935 = _934 + 1.0000;
    float _936 = _926 / _919;
    float _937 = _936 * _936;
    float _938 = _937 * _936;
    float _939 = _938 * _936;
    float _940 = 1.0000 - _939;
    float _941 = GLSL.std.450::FClamp(_940, 0.0000, 1.0000);
    float _942 = _941 * _941;
    float _943 = _932 * _942;
    float _944 = _935 * _935;
    float _945 = _943 / _944;
    float _946 = GLSL.std.450::NMin(10.0000, _945);
    float3 _947 = _923.xyz;
    float3 _948 = _947 * _946;
    float3 _949 = _948 * _908;
    float _950 = GLSL.std.450::Length(_949);
    bool _951 = _950 > 0.0000;
    
    if(_951) {
      float _954 = Dot(_928, _794);
      float _955 = GLSL.std.450::FClamp(_954, 0.0000, 1.0000);
      float3 _956 = _949 * _955;
      float3 _957 = CompositeConstruct({_954, _954, _954});
      float3 _958 = _957 + {1.0000, 1.0000, 1.0000};
      float3 _959 = _958 * {0.5000, 0.5000, 0.5000};
      float3 _960 = GLSL.std.450::FClamp(_959, {0.0000, 0.0000, 0.0000}, {1.0000, 1.0000, 1.0000});
      float3 _961 = _960 * 1.0000;
      float3 _962 = _961 * _949;
      float _963 = 1.0000 - _364;
      float _964 = GLSL.std.450::FClamp(_963, 0.0000, 1.0000);
      float _965 = _964 * _964;
      float _966 = GLSL.std.450::NMax(_965, 0.0020);
      float _967 = _966 * _966;
      float3 _968 = -_707;
      float3 _969 = _968 + _928;
      float3 _970 = GLSL.std.450::Normalize(_969);
      float _971 = Dot(_794, _970);
      float _972 = GLSL.std.450::FClamp(_971, 0.0000, 1.0000);
      float _973 = Dot(_968, _794);
      float _974 = GLSL.std.450::FClamp(_973, 0.0000, 1.0000);
      float _975 = Dot(_968, _970);
      float _976 = GLSL.std.450::FClamp(_975, 0.0000, 1.0000);
      float _977 = _967 - 1.0000;
      float _978 = _977 * _972;
      float _979 = _978 * _972;
      float _980 = _979 + 1.0000;
      float _981 = GLSL.std.450::Pow(_980, 2.0000);
      float _982 = _967 / _981;
      float _983 = _966 * 0.5000;
      float _984 = 1.0000 - _983;
      float _985 = _974 * _984;
      float _986 = _985 + _983;
      float _987 = _955 * _984;
      float _988 = _987 + _983;
      float _989 = _986 * _988;
      float _990 = 1.0000 / _989;
      float _991 = -5.5547 * _976;
      float _992 = _991 - 6.9832;
      float _993 = _992 * _976;
      float _994 = GLSL.std.450::Exp2(_993);
      float3 _995 = CompositeConstruct({_994, _994, _994});
      float3 _996 = GLSL.std.450::FMix(_995, {1.0000, 1.0000, 1.0000}, {0.0400, 0.0400, 0.0400});
      float3 _997 = _996 * _982;
      float3 _998 = _997 * _990;
      float3 _999 = _998 * _955;
      float3 _1000 = _999 * {0.2500, 0.2500, 0.2500};
      float3 _1001 = _1000 * _949;
      float3 _1002 = _879 + _949;
      float3 _1003 = _338.xyz;
      float3 _1004 = _956 * _1003;
      float3 _1005 = _877 + _1004;
      float3 _1006 = _875 + _1001;
      float3 _1007 = _962 * _788;
      float3 _1008 = _873 + _1007;
    }

    float3 _874 = Phi(_873, _1008);
    float3 _876 = Phi(_875, _1006);
    float3 _878 = Phi(_877, _1005);
    float3 _880 = Phi(_879, _1002);
    uint _882 = _881 + 1;
  }

  int4* _1009 = &cobject_cb.instances[_489].dynamic_light_indices;
  int4 _1010 = *_1009;
  uint4 _1011 = Bitcast(_1010);
  uint _1012 = _1011.x;
  float* _1013 = &dynamic_light_infos._child0[_1012].light_type.x;
  float _1014 = *_1013;
  uint _1015 = ConvertFToU(_1014);
  uint _1016 = _1011.y;
  float* _1017 = &dynamic_light_infos._child0[_1016].light_type.x;
  float _1018 = *_1017;
  uint _1019 = ConvertFToU(_1018);
  uint _1020 = _1011.z;
  float* _1021 = &dynamic_light_infos._child0[_1020].light_type.x;
  float _1022 = *_1021;
  uint _1023 = ConvertFToU(_1022);
  uint _1024 = _1011.w;
  float* _1025 = &dynamic_light_infos._child0[_1024].light_type.x;
  float _1026 = *_1025;
  uint _1027 = ConvertFToU(_1026);
  float* _1028 = &dynamic_light_infos._child0[_1012].shadow_enabled.x;
  float _1029 = *_1028;
  bool _1030 = _1029 > 0.0000;
  [[DontFlatten]]
  if(_1030) {
    float _1033 = _275.x;
    float _1034 = _275.y;
    float _1035 = _275.z;
    float4 _1036 = CompositeConstruct({_1033, _1034, _1035, 1.0000});
    float4x4* _1037 = &dynamic_light_infos._child0[_1012].light_matrix;
    float4x4 _1038 = *_1037;
    float4* _1039 = &dynamic_light_infos._child0[_1012].shadow_scale;
    float4 _1040 = *_1039;
    float4* _1041 = &dynamic_light_infos._child0[_1012].shadow_atlas_offset_scale;
    float4 _1042 = *_1041;
    type.2d.image _1043 = *tex_shadow_map_atlas;
    
    switch(0) {
      default:
        float4 _1046 = _1038 * _1036;
        bool _1047 = _1015 == 2;
        
        if(_1047) {
          float3 _1051 = _1046.xyz;
          float3 _1052 = GLSL.std.450::Normalize(_1051);
          float3 _1053 = _1052 + {0.0000, 0.0000, 1.0000};
          float _1054 = _1053.z;
          float3 _1055 = CompositeConstruct({_1054, _1054, _1054});
          float3 _1056 = _1053 / _1055;
          float _1057 = GLSL.std.450::Length(_1051);
          float _1058 = _1056.x;
          float _1059 = _1056.y;
          float3 _1060 = CompositeConstruct({_1058, _1059, _1057});
          float _1061 = _1046.z;
          bool _1062 = _1061 > 0.0000;
          
          if(_1062) {
          } else {
            float2 _1066 = _1060.xy;
            float2 _1067 = GLSL.std.450::Normalize(_1066);
            float2 _1068 = _1067 * 10000000.0000;
            float _1069 = -_1057;
            float _1070 = _1068.x;
            float _1071 = _1068.y;
            float3 _1072 = CompositeConstruct({_1070, _1071, _1069});
          }

          float3 _1073 = Phi(_1060, _1072);
          float _1074 = _1073.x;
          float _1075 = _1074 * 0.5000;
          float _1076 = _1075 + 0.5000;
          float _1077 = _1073.y;
          float _1078 = _1077 * 0.5000;
          float _1079 = 0.5000 - _1078;
          float _1080 = _1073.z;
          float3 _1081 = CompositeConstruct({_1076, _1079, _1080});
          float _1082 = _1080 * 0.0001;
          float3 _1083 = CompositeInsert(_1082, _1081, {2});
          bool _1084 = _1061 < 0.0000;
          
          if(_1084) {
            break;
          }

        } else {
          float3 _1087 = _1046.xyz;
          bool _1088 = _1015 == 1;
          
          if(_1088) {
            float _1091 = _1046.z;
            float _1092 = _1040.z;
            float _1093 = _1091 * _1092;
            float _1094 = _1093 + 1.0000;
            float _1095 = _1046.w;
            float _1096 = _1094 / _1095;
            float _1097 = _1091 - _1096;
            float3 _1098 = CompositeInsert(_1097, _1087, {2});
          }

          float3 _1099 = Phi(_1087, _1098);
          float _1100 = _1046.w;
          float3 _1101 = CompositeConstruct({_1100, _1100, _1100});
          float3 _1102 = _1099 / _1101;
        }

        float3 _1103 = Phi(_1083, _1102);
        float2 _1104 = _1040.xy;
        float _1105 = _1040.w;
        bool _1106 = _1105 > 0.0000;
        
        if(_1106) {
          float2 _1109 = _1103.xy;
          float2 _1110 = GLSL.std.450::FClamp(_1109, {0.0000, 0.0000}, {1.0000, 1.0000});
          float2 _1111 = _1042.zw;
          float2 _1112 = _1110 * _1111;
          float2 _1113 = _1042.xy;
          float2 _1114 = _1112 + _1113;
          float _1115 = _1103.z;
          float _1116 = _1114.x;
          float _1117 = _1114.y;
          float4 _1118 = CompositeConstruct({_1116, _1117, 0.0000, 0.0000});
          float2 _1119 = _1118.xy;
          type.sampled.image _1120 = SampledImage(_1043, _648);
          float4 _1121 = ImageSampleExplicitLod(_1120, _1119, Lod(0.0000));
          float _1122 = _1121.x;
          float _1123 = _1115 - _1122;
          float _1124 = GLSL.std.450::NMax(-100000.0000, _1123);
          float2 _1125 = {1.0000, 0.0000} * _1104;
          float2 _1126 = _1109 + _1125;
          float2 _1127 = GLSL.std.450::FClamp(_1126, {0.0000, 0.0000}, {1.0000, 1.0000});
          float2 _1128 = _1127 * _1111;
          float2 _1129 = _1128 + _1113;
          float _1130 = _1129.x;
          float _1131 = _1129.y;
          float4 _1132 = CompositeConstruct({_1130, _1131, 0.0000, 0.0000});
          float2 _1133 = _1132.xy;
          type.sampled.image _1134 = SampledImage(_1043, _648);
          float4 _1135 = ImageSampleExplicitLod(_1134, _1133, Lod(0.0000));
          float _1136 = _1135.x;
          float _1137 = _1115 - _1136;
          float _1138 = GLSL.std.450::NMax(_1124, _1137);
          float2 _1139 = {0.5000, 0.8660} * _1104;
          float2 _1140 = _1109 + _1139;
          float2 _1141 = GLSL.std.450::FClamp(_1140, {0.0000, 0.0000}, {1.0000, 1.0000});
          float2 _1142 = _1141 * _1111;
          float2 _1143 = _1142 + _1113;
          float _1144 = _1143.x;
          float _1145 = _1143.y;
          float4 _1146 = CompositeConstruct({_1144, _1145, 0.0000, 0.0000});
          float2 _1147 = _1146.xy;
          type.sampled.image _1148 = SampledImage(_1043, _648);
          float4 _1149 = ImageSampleExplicitLod(_1148, _1147, Lod(0.0000));
          float _1150 = _1149.x;
          float _1151 = _1115 - _1150;
          float _1152 = GLSL.std.450::NMax(_1138, _1151);
          float2 _1153 = {-0.5000, 0.8660} * _1104;
          float2 _1154 = _1109 + _1153;
          float2 _1155 = GLSL.std.450::FClamp(_1154, {0.0000, 0.0000}, {1.0000, 1.0000});
          float2 _1156 = _1155 * _1111;
          float2 _1157 = _1156 + _1113;
          float _1158 = _1157.x;
          float _1159 = _1157.y;
          float4 _1160 = CompositeConstruct({_1158, _1159, 0.0000, 0.0000});
          float2 _1161 = _1160.xy;
          type.sampled.image _1162 = SampledImage(_1043, _648);
          float4 _1163 = ImageSampleExplicitLod(_1162, _1161, Lod(0.0000));
          float _1164 = _1163.x;
          float _1165 = _1115 - _1164;
          float _1166 = GLSL.std.450::NMax(_1152, _1165);
          float2 _1167 = {-1.0000, -0.0000} * _1104;
          float2 _1168 = _1109 + _1167;
          float2 _1169 = GLSL.std.450::FClamp(_1168, {0.0000, 0.0000}, {1.0000, 1.0000});
          float2 _1170 = _1169 * _1111;
          float2 _1171 = _1170 + _1113;
          float _1172 = _1171.x;
          float _1173 = _1171.y;
          float4 _1174 = CompositeConstruct({_1172, _1173, 0.0000, 0.0000});
          float2 _1175 = _1174.xy;
          type.sampled.image _1176 = SampledImage(_1043, _648);
          float4 _1177 = ImageSampleExplicitLod(_1176, _1175, Lod(0.0000));
          float _1178 = _1177.x;
          float _1179 = _1115 - _1178;
          float _1180 = GLSL.std.450::NMax(_1166, _1179);
          float2 _1181 = {-0.5000, -0.8660} * _1104;
          float2 _1182 = _1109 + _1181;
          float2 _1183 = GLSL.std.450::FClamp(_1182, {0.0000, 0.0000}, {1.0000, 1.0000});
          float2 _1184 = _1183 * _1111;
          float2 _1185 = _1184 + _1113;
          float _1186 = _1185.x;
          float _1187 = _1185.y;
          float4 _1188 = CompositeConstruct({_1186, _1187, 0.0000, 0.0000});
          float2 _1189 = _1188.xy;
          type.sampled.image _1190 = SampledImage(_1043, _648);
          float4 _1191 = ImageSampleExplicitLod(_1190, _1189, Lod(0.0000));
          float _1192 = _1191.x;
          float _1193 = _1115 - _1192;
          float _1194 = GLSL.std.450::NMax(_1180, _1193);
          float2 _1195 = {0.5000, -0.8660} * _1104;
          float2 _1196 = _1109 + _1195;
          float2 _1197 = GLSL.std.450::FClamp(_1196, {0.0000, 0.0000}, {1.0000, 1.0000});
          float2 _1198 = _1197 * _1111;
          float2 _1199 = _1198 + _1113;
          float _1200 = _1199.x;
          float _1201 = _1199.y;
          float4 _1202 = CompositeConstruct({_1200, _1201, 0.0000, 0.0000});
          float2 _1203 = _1202.xy;
          type.sampled.image _1204 = SampledImage(_1043, _648);
          float4 _1205 = ImageSampleExplicitLod(_1204, _1203, Lod(0.0000));
          float _1206 = _1205.x;
          float _1207 = _1115 - _1206;
          float _1208 = GLSL.std.450::NMax(_1194, _1207);
          float _1209 = _1105 * _1208;
          float _1210 = 0.2000 + _1209;
          float _1211 = GLSL.std.450::FClamp(_1210, 0.0000, 1.0000);
        }

        float _1212 = Phi(1.0000, _1211);
        float2 _1213 = _1104 * _1212;
        float2 _1214 = _1103.xy;
        float2 _1215 = GLSL.std.450::FClamp(_1214, {0.0000, 0.0000}, {1.0000, 1.0000});
        float2 _1216 = _1042.zw;
        float2 _1217 = _1215 * _1216;
        float2 _1218 = _1042.xy;
        float2 _1219 = _1217 + _1218;
        float _1220 = _1103.z;
        float _1221 = _1219.x;
        float _1222 = _1219.y;
        type.sampler _1223 = *SamplerDepth;
        float4 _1224 = CompositeConstruct({_1221, _1222, _1220, 1.0000});
        float2 _1225 = _1224.xy;
        type.sampled.image _1226 = SampledImage(_1043, _1223);
        float _1227 = ImageSampleDrefExplicitLod(_1226, _1225, _1220, Lod(0.0000));
        float2 _1228 = {1.0000, 0.0000} * _1213;
        float2 _1229 = _1214 + _1228;
        float2 _1230 = GLSL.std.450::FClamp(_1229, {0.0000, 0.0000}, {1.0000, 1.0000});
        float2 _1231 = _1230 * _1216;
        float2 _1232 = _1231 + _1218;
        float _1233 = _1232.x;
        float _1234 = _1232.y;
        float4 _1235 = CompositeConstruct({_1233, _1234, _1220, 1.0000});
        float2 _1236 = _1235.xy;
        type.sampled.image _1237 = SampledImage(_1043, _1223);
        float _1238 = ImageSampleDrefExplicitLod(_1237, _1236, _1220, Lod(0.0000));
        float _1239 = _1227 + _1238;
        float2 _1240 = {0.5000, 0.8660} * _1213;
        float2 _1241 = _1214 + _1240;
        float2 _1242 = GLSL.std.450::FClamp(_1241, {0.0000, 0.0000}, {1.0000, 1.0000});
        float2 _1243 = _1242 * _1216;
        float2 _1244 = _1243 + _1218;
        float _1245 = _1244.x;
        float _1246 = _1244.y;
        float4 _1247 = CompositeConstruct({_1245, _1246, _1220, 1.0000});
        float2 _1248 = _1247.xy;
        type.sampled.image _1249 = SampledImage(_1043, _1223);
        float _1250 = ImageSampleDrefExplicitLod(_1249, _1248, _1220, Lod(0.0000));
        float _1251 = _1239 + _1250;
        float2 _1252 = {-0.5000, 0.8660} * _1213;
        float2 _1253 = _1214 + _1252;
        float2 _1254 = GLSL.std.450::FClamp(_1253, {0.0000, 0.0000}, {1.0000, 1.0000});
        float2 _1255 = _1254 * _1216;
        float2 _1256 = _1255 + _1218;
        float _1257 = _1256.x;
        float _1258 = _1256.y;
        float4 _1259 = CompositeConstruct({_1257, _1258, _1220, 1.0000});
        float2 _1260 = _1259.xy;
        type.sampled.image _1261 = SampledImage(_1043, _1223);
        float _1262 = ImageSampleDrefExplicitLod(_1261, _1260, _1220, Lod(0.0000));
        float _1263 = _1251 + _1262;
        float2 _1264 = {-1.0000, -0.0000} * _1213;
        float2 _1265 = _1214 + _1264;
        float2 _1266 = GLSL.std.450::FClamp(_1265, {0.0000, 0.0000}, {1.0000, 1.0000});
        float2 _1267 = _1266 * _1216;
        float2 _1268 = _1267 + _1218;
        float _1269 = _1268.x;
        float _1270 = _1268.y;
        float4 _1271 = CompositeConstruct({_1269, _1270, _1220, 1.0000});
        float2 _1272 = _1271.xy;
        type.sampled.image _1273 = SampledImage(_1043, _1223);
        float _1274 = ImageSampleDrefExplicitLod(_1273, _1272, _1220, Lod(0.0000));
        float _1275 = _1263 + _1274;
        float2 _1276 = {-0.5000, -0.8660} * _1213;
        float2 _1277 = _1214 + _1276;
        float2 _1278 = GLSL.std.450::FClamp(_1277, {0.0000, 0.0000}, {1.0000, 1.0000});
        float2 _1279 = _1278 * _1216;
        float2 _1280 = _1279 + _1218;
        float _1281 = _1280.x;
        float _1282 = _1280.y;
        float4 _1283 = CompositeConstruct({_1281, _1282, _1220, 1.0000});
        float2 _1284 = _1283.xy;
        type.sampled.image _1285 = SampledImage(_1043, _1223);
        float _1286 = ImageSampleDrefExplicitLod(_1285, _1284, _1220, Lod(0.0000));
        float _1287 = _1275 + _1286;
        float2 _1288 = {0.5000, -0.8660} * _1213;
        float2 _1289 = _1214 + _1288;
        float2 _1290 = GLSL.std.450::FClamp(_1289, {0.0000, 0.0000}, {1.0000, 1.0000});
        float2 _1291 = _1290 * _1216;
        float2 _1292 = _1291 + _1218;
        float _1293 = _1292.x;
        float _1294 = _1292.y;
        float4 _1295 = CompositeConstruct({_1293, _1294, _1220, 1.0000});
        float2 _1296 = _1295.xy;
        type.sampled.image _1297 = SampledImage(_1043, _1223);
        float _1298 = ImageSampleDrefExplicitLod(_1297, _1296, _1220, Lod(0.0000));
        float _1299 = _1287 + _1298;
        float _1300 = _1299 * 0.1429;
        bool _1301 = _1015 == 0;
        
        if(_1301) {
          float4* _1304 = &cpass_cb.player_position;
          float4 _1305 = *_1304;
          float2 _1306 = _1305.xy;
          float2 _1307 = _1036.xy;
          float2 _1308 = _1306 - _1307;
          float _1309 = GLSL.std.450::Length(_1308);
          float* _1310 = &cpass_cb.clouds_fade_radius;
          float _1311 = *_1310;
          float _1312 = _1309 / _1311;
          float _1313 = 1.0000 - _1312;
          float _1314 = GLSL.std.450::FClamp(_1313, 0.0000, 1.0000);
          float _1315 = GLSL.std.450::SmoothStep(0.0000, 1.0000, _1314);
          float4x4 _1316 = Transpose(_1038);
          float4 _1317 = _1316[2];
          float3 _1318 = _1317.xyz;
          float4* _1319 = &cpass_cb.clouds_velocity;
          float4 _1320 = *_1319;
          float2 _1321 = _1320.xy;
          float _1322 = GLSL.std.450::Length(_1321);
          bool _1323 = _1322 > 0.1000;
          
          if(_1323) {
            float _1327 = _1320.x;
            float _1328 = _1320.y;
            float3 _1329 = CompositeConstruct({_1327, _1328, 0.0000});
            float3 _1330 = GLSL.std.450::Normalize(_1329);
          } else {
          }

          float3 _1331 = Phi(_1330, {1.0000, 0.0000, 0.0000});
          float _1332 = _1331.y;
          float _1333 = -_1332;
          float _1334 = _1331.x;
          float3 _1335 = CompositeConstruct({_1333, _1334, 0.0000});
          float3 _1336 = GLSL.std.450::Normalize(_1335);
          float3 _1337 = _1036.xyz;
          float _1338 = _1317.z;
          float3 _1339 = CompositeConstruct({_1338, _1338, _1338});
          float3 _1340 = _1318 / _1339;
          float3 _1341 = _1340 * 1000.0000;
          float3 _1342 = _1337 - _1341;
          float _1343 = Dot(_1331, _1342);
          float _1344 = Dot(_1336, _1342);
          float2 _1345 = CompositeConstruct({_1343, _1344});
          float* _1346 = &cpass_cb.clouds_scale;
          float _1347 = *_1346;
          float _1348 = 0.0010 * _1347;
          type.2d.image _1349 = *noise_sampler;
          type.sampler _1350 = *SamplerLinearWrapNoBias;
          float2 _1351 = CompositeConstruct({_1322, 0.0000});
          float* _1352 = &cpass_cb.time;
          float _1353 = *_1352;
          float2 _1354 = _1351 * _1353;
          float2 _1355 = _1345 + _1354;
          float2 _1356 = _1355 * _1348;
          float _1357 = _1356.x;
          float _1358 = _1356.y;
          float4 _1359 = CompositeConstruct({_1357, _1358, 0.0000, 0.0000});
          float2 _1360 = _1359.xy;
          type.sampled.image _1361 = SampledImage(_1349, _1350);
          float4 _1362 = ImageSampleExplicitLod(_1361, _1360, Lod(0.0000));
          float _1363 = _1362.w;
          float* _1364 = &cpass_cb.clouds_pre_fade;
          float _1365 = *_1364;
          float _1366 = _1315 * _1365;
          float _1367 = _1363 + _1366;
          float _1368 = GLSL.std.450::FClamp(_1367, 0.0000, 1.0000);
          float* _1369 = &cpass_cb.clouds_midpoint;
          float _1370 = *_1369;
          float* _1371 = &cpass_cb.clouds_sharpness;
          float _1372 = *_1371;
          float _1373 = 1.0000 - _1372;
          float _1374 = GLSL.std.450::NMax(0.0010, _1373);
          float _1375 = 2.0000 / _1374;
          float _1376 = _1375 - 1.0000;
          float _1377 = 1.0000 - _1370;
          float _1378 = GLSL.std.450::NMax(_1370, _1368);
          float _1379 = 1.0000 - _1378;
          float _1380 = GLSL.std.450::FClamp(_1379, 0.0000, 1.0000);
          float _1381 = GLSL.std.450::Pow(_1380, _1376);
          float _1382 = -_1381;
          float _1383 = GLSL.std.450::FClamp(_1377, 0.0000, 1.0000);
          float _1384 = 2.0000 - _1375;
          float _1385 = GLSL.std.450::Pow(_1383, _1384);
          float _1386 = _1382 * _1385;
          float _1387 = GLSL.std.450::NMin(_1370, _1368);
          float _1388 = GLSL.std.450::FClamp(_1387, 0.0000, 1.0000);
          float _1389 = GLSL.std.450::Pow(_1388, _1376);
          float _1390 = GLSL.std.450::FClamp(_1370, 0.0000, 1.0000);
          float _1391 = GLSL.std.450::Pow(_1390, _1384);
          float _1392 = _1389 * _1391;
          float _1393 = _1386 + _1392;
          float _1394 = _1377 + _1393;
          float _1395 = GLSL.std.450::FClamp(_1394, 0.0000, 1.0000);
          float* _1396 = &cpass_cb.clouds_post_fade;
          float _1397 = *_1396;
          float _1398 = _1315 * _1397;
          float _1399 = _1395 + _1398;
          float _1400 = GLSL.std.450::FClamp(_1399, 0.0000, 1.0000);
          float* _1401 = &cpass_cb.clouds_intensity;
          float _1402 = *_1401;
          float _1403 = GLSL.std.450::FMix(1.0000, _1400, _1402);
          float _1404 = _1300 * _1403;
        }

        float _1405 = Phi(_1300, _1404);
        break;
    }

    float _1406 = Phi(0.0000, _1405);
    float4 _1407 = CompositeInsert(_1406, {1.0000, 1.0000, 1.0000, 1.0000}, {0});
  }

  float4 _1408 = Phi({1.0000, 1.0000, 1.0000, 1.0000}, _1407);
  float* _1409 = &dynamic_light_infos._child0[_1016].shadow_enabled.x;
  float _1410 = *_1409;
  bool _1411 = _1410 > 0.0000;
  [[DontFlatten]]
  if(_1411) {
    float _1414 = _275.x;
    float _1415 = _275.y;
    float _1416 = _275.z;
    float4 _1417 = CompositeConstruct({_1414, _1415, _1416, 1.0000});
    float4x4* _1418 = &dynamic_light_infos._child0[_1016].light_matrix;
    float4x4 _1419 = *_1418;
    float4* _1420 = &dynamic_light_infos._child0[_1016].shadow_scale;
    float4 _1421 = *_1420;
    float4* _1422 = &dynamic_light_infos._child0[_1016].shadow_atlas_offset_scale;
    float4 _1423 = *_1422;
    type.2d.image _1424 = *tex_shadow_map_atlas;
    
    switch(0) {
      default:
        float4 _1427 = _1419 * _1417;
        bool _1428 = _1019 == 2;
        
        if(_1428) {
          float3 _1432 = _1427.xyz;
          float3 _1433 = GLSL.std.450::Normalize(_1432);
          float3 _1434 = _1433 + {0.0000, 0.0000, 1.0000};
          float _1435 = _1434.z;
          float3 _1436 = CompositeConstruct({_1435, _1435, _1435});
          float3 _1437 = _1434 / _1436;
          float _1438 = GLSL.std.450::Length(_1432);
          float _1439 = _1437.x;
          float _1440 = _1437.y;
          float3 _1441 = CompositeConstruct({_1439, _1440, _1438});
          float _1442 = _1427.z;
          bool _1443 = _1442 > 0.0000;
          
          if(_1443) {
          } else {
            float2 _1447 = _1441.xy;
            float2 _1448 = GLSL.std.450::Normalize(_1447);
            float2 _1449 = _1448 * 10000000.0000;
            float _1450 = -_1438;
            float _1451 = _1449.x;
            float _1452 = _1449.y;
            float3 _1453 = CompositeConstruct({_1451, _1452, _1450});
          }

          float3 _1454 = Phi(_1441, _1453);
          float _1455 = _1454.x;
          float _1456 = _1455 * 0.5000;
          float _1457 = _1456 + 0.5000;
          float _1458 = _1454.y;
          float _1459 = _1458 * 0.5000;
          float _1460 = 0.5000 - _1459;
          float _1461 = _1454.z;
          float3 _1462 = CompositeConstruct({_1457, _1460, _1461});
          float _1463 = _1461 * 0.0001;
          float3 _1464 = CompositeInsert(_1463, _1462, {2});
          bool _1465 = _1442 < 0.0000;
          
          if(_1465) {
            break;
          }

        } else {
          float3 _1468 = _1427.xyz;
          bool _1469 = _1019 == 1;
          
          if(_1469) {
            float _1472 = _1427.z;
            float _1473 = _1421.z;
            float _1474 = _1472 * _1473;
            float _1475 = _1474 + 1.0000;
            float _1476 = _1427.w;
            float _1477 = _1475 / _1476;
            float _1478 = _1472 - _1477;
            float3 _1479 = CompositeInsert(_1478, _1468, {2});
          }

          float3 _1480 = Phi(_1468, _1479);
          float _1481 = _1427.w;
          float3 _1482 = CompositeConstruct({_1481, _1481, _1481});
          float3 _1483 = _1480 / _1482;
        }

        float3 _1484 = Phi(_1464, _1483);
        float2 _1485 = _1421.xy;
        float _1486 = _1421.w;
        bool _1487 = _1486 > 0.0000;
        
        if(_1487) {
          float2 _1490 = _1484.xy;
          float2 _1491 = GLSL.std.450::FClamp(_1490, {0.0000, 0.0000}, {1.0000, 1.0000});
          float2 _1492 = _1423.zw;
          float2 _1493 = _1491 * _1492;
          float2 _1494 = _1423.xy;
          float2 _1495 = _1493 + _1494;
          float _1496 = _1484.z;
          float _1497 = _1495.x;
          float _1498 = _1495.y;
          float4 _1499 = CompositeConstruct({_1497, _1498, 0.0000, 0.0000});
          float2 _1500 = _1499.xy;
          type.sampled.image _1501 = SampledImage(_1424, _648);
          float4 _1502 = ImageSampleExplicitLod(_1501, _1500, Lod(0.0000));
          float _1503 = _1502.x;
          float _1504 = _1496 - _1503;
          float _1505 = GLSL.std.450::NMax(-100000.0000, _1504);
          float2 _1506 = {1.0000, 0.0000} * _1485;
          float2 _1507 = _1490 + _1506;
          float2 _1508 = GLSL.std.450::FClamp(_1507, {0.0000, 0.0000}, {1.0000, 1.0000});
          float2 _1509 = _1508 * _1492;
          float2 _1510 = _1509 + _1494;
          float _1511 = _1510.x;
          float _1512 = _1510.y;
          float4 _1513 = CompositeConstruct({_1511, _1512, 0.0000, 0.0000});
          float2 _1514 = _1513.xy;
          type.sampled.image _1515 = SampledImage(_1424, _648);
          float4 _1516 = ImageSampleExplicitLod(_1515, _1514, Lod(0.0000));
          float _1517 = _1516.x;
          float _1518 = _1496 - _1517;
          float _1519 = GLSL.std.450::NMax(_1505, _1518);
          float2 _1520 = {0.5000, 0.8660} * _1485;
          float2 _1521 = _1490 + _1520;
          float2 _1522 = GLSL.std.450::FClamp(_1521, {0.0000, 0.0000}, {1.0000, 1.0000});
          float2 _1523 = _1522 * _1492;
          float2 _1524 = _1523 + _1494;
          float _1525 = _1524.x;
          float _1526 = _1524.y;
          float4 _1527 = CompositeConstruct({_1525, _1526, 0.0000, 0.0000});
          float2 _1528 = _1527.xy;
          type.sampled.image _1529 = SampledImage(_1424, _648);
          float4 _1530 = ImageSampleExplicitLod(_1529, _1528, Lod(0.0000));
          float _1531 = _1530.x;
          float _1532 = _1496 - _1531;
          float _1533 = GLSL.std.450::NMax(_1519, _1532);
          float2 _1534 = {-0.5000, 0.8660} * _1485;
          float2 _1535 = _1490 + _1534;
          float2 _1536 = GLSL.std.450::FClamp(_1535, {0.0000, 0.0000}, {1.0000, 1.0000});
          float2 _1537 = _1536 * _1492;
          float2 _1538 = _1537 + _1494;
          float _1539 = _1538.x;
          float _1540 = _1538.y;
          float4 _1541 = CompositeConstruct({_1539, _1540, 0.0000, 0.0000});
          float2 _1542 = _1541.xy;
          type.sampled.image _1543 = SampledImage(_1424, _648);
          float4 _1544 = ImageSampleExplicitLod(_1543, _1542, Lod(0.0000));
          float _1545 = _1544.x;
          float _1546 = _1496 - _1545;
          float _1547 = GLSL.std.450::NMax(_1533, _1546);
          float2 _1548 = {-1.0000, -0.0000} * _1485;
          float2 _1549 = _1490 + _1548;
          float2 _1550 = GLSL.std.450::FClamp(_1549, {0.0000, 0.0000}, {1.0000, 1.0000});
          float2 _1551 = _1550 * _1492;
          float2 _1552 = _1551 + _1494;
          float _1553 = _1552.x;
          float _1554 = _1552.y;
          float4 _1555 = CompositeConstruct({_1553, _1554, 0.0000, 0.0000});
          float2 _1556 = _1555.xy;
          type.sampled.image _1557 = SampledImage(_1424, _648);
          float4 _1558 = ImageSampleExplicitLod(_1557, _1556, Lod(0.0000));
          float _1559 = _1558.x;
          float _1560 = _1496 - _1559;
          float _1561 = GLSL.std.450::NMax(_1547, _1560);
          float2 _1562 = {-0.5000, -0.8660} * _1485;
          float2 _1563 = _1490 + _1562;
          float2 _1564 = GLSL.std.450::FClamp(_1563, {0.0000, 0.0000}, {1.0000, 1.0000});
          float2 _1565 = _1564 * _1492;
          float2 _1566 = _1565 + _1494;
          float _1567 = _1566.x;
          float _1568 = _1566.y;
          float4 _1569 = CompositeConstruct({_1567, _1568, 0.0000, 0.0000});
          float2 _1570 = _1569.xy;
          type.sampled.image _1571 = SampledImage(_1424, _648);
          float4 _1572 = ImageSampleExplicitLod(_1571, _1570, Lod(0.0000));
          float _1573 = _1572.x;
          float _1574 = _1496 - _1573;
          float _1575 = GLSL.std.450::NMax(_1561, _1574);
          float2 _1576 = {0.5000, -0.8660} * _1485;
          float2 _1577 = _1490 + _1576;
          float2 _1578 = GLSL.std.450::FClamp(_1577, {0.0000, 0.0000}, {1.0000, 1.0000});
          float2 _1579 = _1578 * _1492;
          float2 _1580 = _1579 + _1494;
          float _1581 = _1580.x;
          float _1582 = _1580.y;
          float4 _1583 = CompositeConstruct({_1581, _1582, 0.0000, 0.0000});
          float2 _1584 = _1583.xy;
          type.sampled.image _1585 = SampledImage(_1424, _648);
          float4 _1586 = ImageSampleExplicitLod(_1585, _1584, Lod(0.0000));
          float _1587 = _1586.x;
          float _1588 = _1496 - _1587;
          float _1589 = GLSL.std.450::NMax(_1575, _1588);
          float _1590 = _1486 * _1589;
          float _1591 = 0.2000 + _1590;
          float _1592 = GLSL.std.450::FClamp(_1591, 0.0000, 1.0000);
        }

        float _1593 = Phi(1.0000, _1592);
        float2 _1594 = _1485 * _1593;
        float2 _1595 = _1484.xy;
        float2 _1596 = GLSL.std.450::FClamp(_1595, {0.0000, 0.0000}, {1.0000, 1.0000});
        float2 _1597 = _1423.zw;
        float2 _1598 = _1596 * _1597;
        float2 _1599 = _1423.xy;
        float2 _1600 = _1598 + _1599;
        float _1601 = _1484.z;
        float _1602 = _1600.x;
        float _1603 = _1600.y;
        type.sampler _1604 = *SamplerDepth;
        float4 _1605 = CompositeConstruct({_1602, _1603, _1601, 1.0000});
        float2 _1606 = _1605.xy;
        type.sampled.image _1607 = SampledImage(_1424, _1604);
        float _1608 = ImageSampleDrefExplicitLod(_1607, _1606, _1601, Lod(0.0000));
        float2 _1609 = {1.0000, 0.0000} * _1594;
        float2 _1610 = _1595 + _1609;
        float2 _1611 = GLSL.std.450::FClamp(_1610, {0.0000, 0.0000}, {1.0000, 1.0000});
        float2 _1612 = _1611 * _1597;
        float2 _1613 = _1612 + _1599;
        float _1614 = _1613.x;
        float _1615 = _1613.y;
        float4 _1616 = CompositeConstruct({_1614, _1615, _1601, 1.0000});
        float2 _1617 = _1616.xy;
        type.sampled.image _1618 = SampledImage(_1424, _1604);
        float _1619 = ImageSampleDrefExplicitLod(_1618, _1617, _1601, Lod(0.0000));
        float _1620 = _1608 + _1619;
        float2 _1621 = {0.5000, 0.8660} * _1594;
        float2 _1622 = _1595 + _1621;
        float2 _1623 = GLSL.std.450::FClamp(_1622, {0.0000, 0.0000}, {1.0000, 1.0000});
        float2 _1624 = _1623 * _1597;
        float2 _1625 = _1624 + _1599;
        float _1626 = _1625.x;
        float _1627 = _1625.y;
        float4 _1628 = CompositeConstruct({_1626, _1627, _1601, 1.0000});
        float2 _1629 = _1628.xy;
        type.sampled.image _1630 = SampledImage(_1424, _1604);
        float _1631 = ImageSampleDrefExplicitLod(_1630, _1629, _1601, Lod(0.0000));
        float _1632 = _1620 + _1631;
        float2 _1633 = {-0.5000, 0.8660} * _1594;
        float2 _1634 = _1595 + _1633;
        float2 _1635 = GLSL.std.450::FClamp(_1634, {0.0000, 0.0000}, {1.0000, 1.0000});
        float2 _1636 = _1635 * _1597;
        float2 _1637 = _1636 + _1599;
        float _1638 = _1637.x;
        float _1639 = _1637.y;
        float4 _1640 = CompositeConstruct({_1638, _1639, _1601, 1.0000});
        float2 _1641 = _1640.xy;
        type.sampled.image _1642 = SampledImage(_1424, _1604);
        float _1643 = ImageSampleDrefExplicitLod(_1642, _1641, _1601, Lod(0.0000));
        float _1644 = _1632 + _1643;
        float2 _1645 = {-1.0000, -0.0000} * _1594;
        float2 _1646 = _1595 + _1645;
        float2 _1647 = GLSL.std.450::FClamp(_1646, {0.0000, 0.0000}, {1.0000, 1.0000});
        float2 _1648 = _1647 * _1597;
        float2 _1649 = _1648 + _1599;
        float _1650 = _1649.x;
        float _1651 = _1649.y;
        float4 _1652 = CompositeConstruct({_1650, _1651, _1601, 1.0000});
        float2 _1653 = _1652.xy;
        type.sampled.image _1654 = SampledImage(_1424, _1604);
        float _1655 = ImageSampleDrefExplicitLod(_1654, _1653, _1601, Lod(0.0000));
        float _1656 = _1644 + _1655;
        float2 _1657 = {-0.5000, -0.8660} * _1594;
        float2 _1658 = _1595 + _1657;
        float2 _1659 = GLSL.std.450::FClamp(_1658, {0.0000, 0.0000}, {1.0000, 1.0000});
        float2 _1660 = _1659 * _1597;
        float2 _1661 = _1660 + _1599;
        float _1662 = _1661.x;
        float _1663 = _1661.y;
        float4 _1664 = CompositeConstruct({_1662, _1663, _1601, 1.0000});
        float2 _1665 = _1664.xy;
        type.sampled.image _1666 = SampledImage(_1424, _1604);
        float _1667 = ImageSampleDrefExplicitLod(_1666, _1665, _1601, Lod(0.0000));
        float _1668 = _1656 + _1667;
        float2 _1669 = {0.5000, -0.8660} * _1594;
        float2 _1670 = _1595 + _1669;
        float2 _1671 = GLSL.std.450::FClamp(_1670, {0.0000, 0.0000}, {1.0000, 1.0000});
        float2 _1672 = _1671 * _1597;
        float2 _1673 = _1672 + _1599;
        float _1674 = _1673.x;
        float _1675 = _1673.y;
        float4 _1676 = CompositeConstruct({_1674, _1675, _1601, 1.0000});
        float2 _1677 = _1676.xy;
        type.sampled.image _1678 = SampledImage(_1424, _1604);
        float _1679 = ImageSampleDrefExplicitLod(_1678, _1677, _1601, Lod(0.0000));
        float _1680 = _1668 + _1679;
        float _1681 = _1680 * 0.1429;
        bool _1682 = _1019 == 0;
        
        if(_1682) {
          float4* _1685 = &cpass_cb.player_position;
          float4 _1686 = *_1685;
          float2 _1687 = _1686.xy;
          float2 _1688 = _1417.xy;
          float2 _1689 = _1687 - _1688;
          float _1690 = GLSL.std.450::Length(_1689);
          float* _1691 = &cpass_cb.clouds_fade_radius;
          float _1692 = *_1691;
          float _1693 = _1690 / _1692;
          float _1694 = 1.0000 - _1693;
          float _1695 = GLSL.std.450::FClamp(_1694, 0.0000, 1.0000);
          float _1696 = GLSL.std.450::SmoothStep(0.0000, 1.0000, _1695);
          float4x4 _1697 = Transpose(_1419);
          float4 _1698 = _1697[2];
          float3 _1699 = _1698.xyz;
          float4* _1700 = &cpass_cb.clouds_velocity;
          float4 _1701 = *_1700;
          float2 _1702 = _1701.xy;
          float _1703 = GLSL.std.450::Length(_1702);
          bool _1704 = _1703 > 0.1000;
          
          if(_1704) {
            float _1708 = _1701.x;
            float _1709 = _1701.y;
            float3 _1710 = CompositeConstruct({_1708, _1709, 0.0000});
            float3 _1711 = GLSL.std.450::Normalize(_1710);
          } else {
          }

          float3 _1712 = Phi(_1711, {1.0000, 0.0000, 0.0000});
          float _1713 = _1712.y;
          float _1714 = -_1713;
          float _1715 = _1712.x;
          float3 _1716 = CompositeConstruct({_1714, _1715, 0.0000});
          float3 _1717 = GLSL.std.450::Normalize(_1716);
          float3 _1718 = _1417.xyz;
          float _1719 = _1698.z;
          float3 _1720 = CompositeConstruct({_1719, _1719, _1719});
          float3 _1721 = _1699 / _1720;
          float3 _1722 = _1721 * 1000.0000;
          float3 _1723 = _1718 - _1722;
          float _1724 = Dot(_1712, _1723);
          float _1725 = Dot(_1717, _1723);
          float2 _1726 = CompositeConstruct({_1724, _1725});
          float* _1727 = &cpass_cb.clouds_scale;
          float _1728 = *_1727;
          float _1729 = 0.0010 * _1728;
          type.2d.image _1730 = *noise_sampler;
          type.sampler _1731 = *SamplerLinearWrapNoBias;
          float2 _1732 = CompositeConstruct({_1703, 0.0000});
          float* _1733 = &cpass_cb.time;
          float _1734 = *_1733;
          float2 _1735 = _1732 * _1734;
          float2 _1736 = _1726 + _1735;
          float2 _1737 = _1736 * _1729;
          float _1738 = _1737.x;
          float _1739 = _1737.y;
          float4 _1740 = CompositeConstruct({_1738, _1739, 0.0000, 0.0000});
          float2 _1741 = _1740.xy;
          type.sampled.image _1742 = SampledImage(_1730, _1731);
          float4 _1743 = ImageSampleExplicitLod(_1742, _1741, Lod(0.0000));
          float _1744 = _1743.w;
          float* _1745 = &cpass_cb.clouds_pre_fade;
          float _1746 = *_1745;
          float _1747 = _1696 * _1746;
          float _1748 = _1744 + _1747;
          float _1749 = GLSL.std.450::FClamp(_1748, 0.0000, 1.0000);
          float* _1750 = &cpass_cb.clouds_midpoint;
          float _1751 = *_1750;
          float* _1752 = &cpass_cb.clouds_sharpness;
          float _1753 = *_1752;
          float _1754 = 1.0000 - _1753;
          float _1755 = GLSL.std.450::NMax(0.0010, _1754);
          float _1756 = 2.0000 / _1755;
          float _1757 = _1756 - 1.0000;
          float _1758 = 1.0000 - _1751;
          float _1759 = GLSL.std.450::NMax(_1751, _1749);
          float _1760 = 1.0000 - _1759;
          float _1761 = GLSL.std.450::FClamp(_1760, 0.0000, 1.0000);
          float _1762 = GLSL.std.450::Pow(_1761, _1757);
          float _1763 = -_1762;
          float _1764 = GLSL.std.450::FClamp(_1758, 0.0000, 1.0000);
          float _1765 = 2.0000 - _1756;
          float _1766 = GLSL.std.450::Pow(_1764, _1765);
          float _1767 = _1763 * _1766;
          float _1768 = GLSL.std.450::NMin(_1751, _1749);
          float _1769 = GLSL.std.450::FClamp(_1768, 0.0000, 1.0000);
          float _1770 = GLSL.std.450::Pow(_1769, _1757);
          float _1771 = GLSL.std.450::FClamp(_1751, 0.0000, 1.0000);
          float _1772 = GLSL.std.450::Pow(_1771, _1765);
          float _1773 = _1770 * _1772;
          float _1774 = _1767 + _1773;
          float _1775 = _1758 + _1774;
          float _1776 = GLSL.std.450::FClamp(_1775, 0.0000, 1.0000);
          float* _1777 = &cpass_cb.clouds_post_fade;
          float _1778 = *_1777;
          float _1779 = _1696 * _1778;
          float _1780 = _1776 + _1779;
          float _1781 = GLSL.std.450::FClamp(_1780, 0.0000, 1.0000);
          float* _1782 = &cpass_cb.clouds_intensity;
          float _1783 = *_1782;
          float _1784 = GLSL.std.450::FMix(1.0000, _1781, _1783);
          float _1785 = _1681 * _1784;
        }

        float _1786 = Phi(_1681, _1785);
        break;
    }

    float _1787 = Phi(0.0000, _1786);
    float4 _1788 = CompositeInsert(_1787, _1408, {1});
  }

  float4 _1789 = Phi(_1408, _1788);
  float* _1790 = &dynamic_light_infos._child0[_1020].shadow_enabled.x;
  float _1791 = *_1790;
  bool _1792 = _1791 > 0.0000;
  [[DontFlatten]]
  if(_1792) {
    float _1795 = _275.x;
    float _1796 = _275.y;
    float _1797 = _275.z;
    float4 _1798 = CompositeConstruct({_1795, _1796, _1797, 1.0000});
    float4x4* _1799 = &dynamic_light_infos._child0[_1020].light_matrix;
    float4x4 _1800 = *_1799;
    float4* _1801 = &dynamic_light_infos._child0[_1020].shadow_scale;
    float4 _1802 = *_1801;
    float4* _1803 = &dynamic_light_infos._child0[_1020].shadow_atlas_offset_scale;
    float4 _1804 = *_1803;
    type.2d.image _1805 = *tex_shadow_map_atlas;
    
    switch(0) {
      default:
        float4 _1808 = _1800 * _1798;
        bool _1809 = _1023 == 2;
        
        if(_1809) {
          float3 _1813 = _1808.xyz;
          float3 _1814 = GLSL.std.450::Normalize(_1813);
          float3 _1815 = _1814 + {0.0000, 0.0000, 1.0000};
          float _1816 = _1815.z;
          float3 _1817 = CompositeConstruct({_1816, _1816, _1816});
          float3 _1818 = _1815 / _1817;
          float _1819 = GLSL.std.450::Length(_1813);
          float _1820 = _1818.x;
          float _1821 = _1818.y;
          float3 _1822 = CompositeConstruct({_1820, _1821, _1819});
          float _1823 = _1808.z;
          bool _1824 = _1823 > 0.0000;
          
          if(_1824) {
          } else {
            float2 _1828 = _1822.xy;
            float2 _1829 = GLSL.std.450::Normalize(_1828);
            float2 _1830 = _1829 * 10000000.0000;
            float _1831 = -_1819;
            float _1832 = _1830.x;
            float _1833 = _1830.y;
            float3 _1834 = CompositeConstruct({_1832, _1833, _1831});
          }

          float3 _1835 = Phi(_1822, _1834);
          float _1836 = _1835.x;
          float _1837 = _1836 * 0.5000;
          float _1838 = _1837 + 0.5000;
          float _1839 = _1835.y;
          float _1840 = _1839 * 0.5000;
          float _1841 = 0.5000 - _1840;
          float _1842 = _1835.z;
          float3 _1843 = CompositeConstruct({_1838, _1841, _1842});
          float _1844 = _1842 * 0.0001;
          float3 _1845 = CompositeInsert(_1844, _1843, {2});
          bool _1846 = _1823 < 0.0000;
          
          if(_1846) {
            break;
          }

        } else {
          float3 _1849 = _1808.xyz;
          bool _1850 = _1023 == 1;
          
          if(_1850) {
            float _1853 = _1808.z;
            float _1854 = _1802.z;
            float _1855 = _1853 * _1854;
            float _1856 = _1855 + 1.0000;
            float _1857 = _1808.w;
            float _1858 = _1856 / _1857;
            float _1859 = _1853 - _1858;
            float3 _1860 = CompositeInsert(_1859, _1849, {2});
          }

          float3 _1861 = Phi(_1849, _1860);
          float _1862 = _1808.w;
          float3 _1863 = CompositeConstruct({_1862, _1862, _1862});
          float3 _1864 = _1861 / _1863;
        }

        float3 _1865 = Phi(_1845, _1864);
        float2 _1866 = _1802.xy;
        float _1867 = _1802.w;
        bool _1868 = _1867 > 0.0000;
        
        if(_1868) {
          float2 _1871 = _1865.xy;
          float2 _1872 = GLSL.std.450::FClamp(_1871, {0.0000, 0.0000}, {1.0000, 1.0000});
          float2 _1873 = _1804.zw;
          float2 _1874 = _1872 * _1873;
          float2 _1875 = _1804.xy;
          float2 _1876 = _1874 + _1875;
          float _1877 = _1865.z;
          float _1878 = _1876.x;
          float _1879 = _1876.y;
          float4 _1880 = CompositeConstruct({_1878, _1879, 0.0000, 0.0000});
          float2 _1881 = _1880.xy;
          type.sampled.image _1882 = SampledImage(_1805, _648);
          float4 _1883 = ImageSampleExplicitLod(_1882, _1881, Lod(0.0000));
          float _1884 = _1883.x;
          float _1885 = _1877 - _1884;
          float _1886 = GLSL.std.450::NMax(-100000.0000, _1885);
          float2 _1887 = {1.0000, 0.0000} * _1866;
          float2 _1888 = _1871 + _1887;
          float2 _1889 = GLSL.std.450::FClamp(_1888, {0.0000, 0.0000}, {1.0000, 1.0000});
          float2 _1890 = _1889 * _1873;
          float2 _1891 = _1890 + _1875;
          float _1892 = _1891.x;
          float _1893 = _1891.y;
          float4 _1894 = CompositeConstruct({_1892, _1893, 0.0000, 0.0000});
          float2 _1895 = _1894.xy;
          type.sampled.image _1896 = SampledImage(_1805, _648);
          float4 _1897 = ImageSampleExplicitLod(_1896, _1895, Lod(0.0000));
          float _1898 = _1897.x;
          float _1899 = _1877 - _1898;
          float _1900 = GLSL.std.450::NMax(_1886, _1899);
          float2 _1901 = {0.5000, 0.8660} * _1866;
          float2 _1902 = _1871 + _1901;
          float2 _1903 = GLSL.std.450::FClamp(_1902, {0.0000, 0.0000}, {1.0000, 1.0000});
          float2 _1904 = _1903 * _1873;
          float2 _1905 = _1904 + _1875;
          float _1906 = _1905.x;
          float _1907 = _1905.y;
          float4 _1908 = CompositeConstruct({_1906, _1907, 0.0000, 0.0000});
          float2 _1909 = _1908.xy;
          type.sampled.image _1910 = SampledImage(_1805, _648);
          float4 _1911 = ImageSampleExplicitLod(_1910, _1909, Lod(0.0000));
          float _1912 = _1911.x;
          float _1913 = _1877 - _1912;
          float _1914 = GLSL.std.450::NMax(_1900, _1913);
          float2 _1915 = {-0.5000, 0.8660} * _1866;
          float2 _1916 = _1871 + _1915;
          float2 _1917 = GLSL.std.450::FClamp(_1916, {0.0000, 0.0000}, {1.0000, 1.0000});
          float2 _1918 = _1917 * _1873;
          float2 _1919 = _1918 + _1875;
          float _1920 = _1919.x;
          float _1921 = _1919.y;
          float4 _1922 = CompositeConstruct({_1920, _1921, 0.0000, 0.0000});
          float2 _1923 = _1922.xy;
          type.sampled.image _1924 = SampledImage(_1805, _648);
          float4 _1925 = ImageSampleExplicitLod(_1924, _1923, Lod(0.0000));
          float _1926 = _1925.x;
          float _1927 = _1877 - _1926;
          float _1928 = GLSL.std.450::NMax(_1914, _1927);
          float2 _1929 = {-1.0000, -0.0000} * _1866;
          float2 _1930 = _1871 + _1929;
          float2 _1931 = GLSL.std.450::FClamp(_1930, {0.0000, 0.0000}, {1.0000, 1.0000});
          float2 _1932 = _1931 * _1873;
          float2 _1933 = _1932 + _1875;
          float _1934 = _1933.x;
          float _1935 = _1933.y;
          float4 _1936 = CompositeConstruct({_1934, _1935, 0.0000, 0.0000});
          float2 _1937 = _1936.xy;
          type.sampled.image _1938 = SampledImage(_1805, _648);
          float4 _1939 = ImageSampleExplicitLod(_1938, _1937, Lod(0.0000));
          float _1940 = _1939.x;
          float _1941 = _1877 - _1940;
          float _1942 = GLSL.std.450::NMax(_1928, _1941);
          float2 _1943 = {-0.5000, -0.8660} * _1866;
          float2 _1944 = _1871 + _1943;
          float2 _1945 = GLSL.std.450::FClamp(_1944, {0.0000, 0.0000}, {1.0000, 1.0000});
          float2 _1946 = _1945 * _1873;
          float2 _1947 = _1946 + _1875;
          float _1948 = _1947.x;
          float _1949 = _1947.y;
          float4 _1950 = CompositeConstruct({_1948, _1949, 0.0000, 0.0000});
          float2 _1951 = _1950.xy;
          type.sampled.image _1952 = SampledImage(_1805, _648);
          float4 _1953 = ImageSampleExplicitLod(_1952, _1951, Lod(0.0000));
          float _1954 = _1953.x;
          float _1955 = _1877 - _1954;
          float _1956 = GLSL.std.450::NMax(_1942, _1955);
          float2 _1957 = {0.5000, -0.8660} * _1866;
          float2 _1958 = _1871 + _1957;
          float2 _1959 = GLSL.std.450::FClamp(_1958, {0.0000, 0.0000}, {1.0000, 1.0000});
          float2 _1960 = _1959 * _1873;
          float2 _1961 = _1960 + _1875;
          float _1962 = _1961.x;
          float _1963 = _1961.y;
          float4 _1964 = CompositeConstruct({_1962, _1963, 0.0000, 0.0000});
          float2 _1965 = _1964.xy;
          type.sampled.image _1966 = SampledImage(_1805, _648);
          float4 _1967 = ImageSampleExplicitLod(_1966, _1965, Lod(0.0000));
          float _1968 = _1967.x;
          float _1969 = _1877 - _1968;
          float _1970 = GLSL.std.450::NMax(_1956, _1969);
          float _1971 = _1867 * _1970;
          float _1972 = 0.2000 + _1971;
          float _1973 = GLSL.std.450::FClamp(_1972, 0.0000, 1.0000);
        }

        float _1974 = Phi(1.0000, _1973);
        float2 _1975 = _1866 * _1974;
        float2 _1976 = _1865.xy;
        float2 _1977 = GLSL.std.450::FClamp(_1976, {0.0000, 0.0000}, {1.0000, 1.0000});
        float2 _1978 = _1804.zw;
        float2 _1979 = _1977 * _1978;
        float2 _1980 = _1804.xy;
        float2 _1981 = _1979 + _1980;
        float _1982 = _1865.z;
        float _1983 = _1981.x;
        float _1984 = _1981.y;
        type.sampler _1985 = *SamplerDepth;
        float4 _1986 = CompositeConstruct({_1983, _1984, _1982, 1.0000});
        float2 _1987 = _1986.xy;
        type.sampled.image _1988 = SampledImage(_1805, _1985);
        float _1989 = ImageSampleDrefExplicitLod(_1988, _1987, _1982, Lod(0.0000));
        float2 _1990 = {1.0000, 0.0000} * _1975;
        float2 _1991 = _1976 + _1990;
        float2 _1992 = GLSL.std.450::FClamp(_1991, {0.0000, 0.0000}, {1.0000, 1.0000});
        float2 _1993 = _1992 * _1978;
        float2 _1994 = _1993 + _1980;
        float _1995 = _1994.x;
        float _1996 = _1994.y;
        float4 _1997 = CompositeConstruct({_1995, _1996, _1982, 1.0000});
        float2 _1998 = _1997.xy;
        type.sampled.image _1999 = SampledImage(_1805, _1985);
        float _2000 = ImageSampleDrefExplicitLod(_1999, _1998, _1982, Lod(0.0000));
        float _2001 = _1989 + _2000;
        float2 _2002 = {0.5000, 0.8660} * _1975;
        float2 _2003 = _1976 + _2002;
        float2 _2004 = GLSL.std.450::FClamp(_2003, {0.0000, 0.0000}, {1.0000, 1.0000});
        float2 _2005 = _2004 * _1978;
        float2 _2006 = _2005 + _1980;
        float _2007 = _2006.x;
        float _2008 = _2006.y;
        float4 _2009 = CompositeConstruct({_2007, _2008, _1982, 1.0000});
        float2 _2010 = _2009.xy;
        type.sampled.image _2011 = SampledImage(_1805, _1985);
        float _2012 = ImageSampleDrefExplicitLod(_2011, _2010, _1982, Lod(0.0000));
        float _2013 = _2001 + _2012;
        float2 _2014 = {-0.5000, 0.8660} * _1975;
        float2 _2015 = _1976 + _2014;
        float2 _2016 = GLSL.std.450::FClamp(_2015, {0.0000, 0.0000}, {1.0000, 1.0000});
        float2 _2017 = _2016 * _1978;
        float2 _2018 = _2017 + _1980;
        float _2019 = _2018.x;
        float _2020 = _2018.y;
        float4 _2021 = CompositeConstruct({_2019, _2020, _1982, 1.0000});
        float2 _2022 = _2021.xy;
        type.sampled.image _2023 = SampledImage(_1805, _1985);
        float _2024 = ImageSampleDrefExplicitLod(_2023, _2022, _1982, Lod(0.0000));
        float _2025 = _2013 + _2024;
        float2 _2026 = {-1.0000, -0.0000} * _1975;
        float2 _2027 = _1976 + _2026;
        float2 _2028 = GLSL.std.450::FClamp(_2027, {0.0000, 0.0000}, {1.0000, 1.0000});
        float2 _2029 = _2028 * _1978;
        float2 _2030 = _2029 + _1980;
        float _2031 = _2030.x;
        float _2032 = _2030.y;
        float4 _2033 = CompositeConstruct({_2031, _2032, _1982, 1.0000});
        float2 _2034 = _2033.xy;
        type.sampled.image _2035 = SampledImage(_1805, _1985);
        float _2036 = ImageSampleDrefExplicitLod(_2035, _2034, _1982, Lod(0.0000));
        float _2037 = _2025 + _2036;
        float2 _2038 = {-0.5000, -0.8660} * _1975;
        float2 _2039 = _1976 + _2038;
        float2 _2040 = GLSL.std.450::FClamp(_2039, {0.0000, 0.0000}, {1.0000, 1.0000});
        float2 _2041 = _2040 * _1978;
        float2 _2042 = _2041 + _1980;
        float _2043 = _2042.x;
        float _2044 = _2042.y;
        float4 _2045 = CompositeConstruct({_2043, _2044, _1982, 1.0000});
        float2 _2046 = _2045.xy;
        type.sampled.image _2047 = SampledImage(_1805, _1985);
        float _2048 = ImageSampleDrefExplicitLod(_2047, _2046, _1982, Lod(0.0000));
        float _2049 = _2037 + _2048;
        float2 _2050 = {0.5000, -0.8660} * _1975;
        float2 _2051 = _1976 + _2050;
        float2 _2052 = GLSL.std.450::FClamp(_2051, {0.0000, 0.0000}, {1.0000, 1.0000});
        float2 _2053 = _2052 * _1978;
        float2 _2054 = _2053 + _1980;
        float _2055 = _2054.x;
        float _2056 = _2054.y;
        float4 _2057 = CompositeConstruct({_2055, _2056, _1982, 1.0000});
        float2 _2058 = _2057.xy;
        type.sampled.image _2059 = SampledImage(_1805, _1985);
        float _2060 = ImageSampleDrefExplicitLod(_2059, _2058, _1982, Lod(0.0000));
        float _2061 = _2049 + _2060;
        float _2062 = _2061 * 0.1429;
        bool _2063 = _1023 == 0;
        
        if(_2063) {
          float4* _2066 = &cpass_cb.player_position;
          float4 _2067 = *_2066;
          float2 _2068 = _2067.xy;
          float2 _2069 = _1798.xy;
          float2 _2070 = _2068 - _2069;
          float _2071 = GLSL.std.450::Length(_2070);
          float* _2072 = &cpass_cb.clouds_fade_radius;
          float _2073 = *_2072;
          float _2074 = _2071 / _2073;
          float _2075 = 1.0000 - _2074;
          float _2076 = GLSL.std.450::FClamp(_2075, 0.0000, 1.0000);
          float _2077 = GLSL.std.450::SmoothStep(0.0000, 1.0000, _2076);
          float4x4 _2078 = Transpose(_1800);
          float4 _2079 = _2078[2];
          float3 _2080 = _2079.xyz;
          float4* _2081 = &cpass_cb.clouds_velocity;
          float4 _2082 = *_2081;
          float2 _2083 = _2082.xy;
          float _2084 = GLSL.std.450::Length(_2083);
          bool _2085 = _2084 > 0.1000;
          
          if(_2085) {
            float _2089 = _2082.x;
            float _2090 = _2082.y;
            float3 _2091 = CompositeConstruct({_2089, _2090, 0.0000});
            float3 _2092 = GLSL.std.450::Normalize(_2091);
          } else {
          }

          float3 _2093 = Phi(_2092, {1.0000, 0.0000, 0.0000});
          float _2094 = _2093.y;
          float _2095 = -_2094;
          float _2096 = _2093.x;
          float3 _2097 = CompositeConstruct({_2095, _2096, 0.0000});
          float3 _2098 = GLSL.std.450::Normalize(_2097);
          float3 _2099 = _1798.xyz;
          float _2100 = _2079.z;
          float3 _2101 = CompositeConstruct({_2100, _2100, _2100});
          float3 _2102 = _2080 / _2101;
          float3 _2103 = _2102 * 1000.0000;
          float3 _2104 = _2099 - _2103;
          float _2105 = Dot(_2093, _2104);
          float _2106 = Dot(_2098, _2104);
          float2 _2107 = CompositeConstruct({_2105, _2106});
          float* _2108 = &cpass_cb.clouds_scale;
          float _2109 = *_2108;
          float _2110 = 0.0010 * _2109;
          type.2d.image _2111 = *noise_sampler;
          type.sampler _2112 = *SamplerLinearWrapNoBias;
          float2 _2113 = CompositeConstruct({_2084, 0.0000});
          float* _2114 = &cpass_cb.time;
          float _2115 = *_2114;
          float2 _2116 = _2113 * _2115;
          float2 _2117 = _2107 + _2116;
          float2 _2118 = _2117 * _2110;
          float _2119 = _2118.x;
          float _2120 = _2118.y;
          float4 _2121 = CompositeConstruct({_2119, _2120, 0.0000, 0.0000});
          float2 _2122 = _2121.xy;
          type.sampled.image _2123 = SampledImage(_2111, _2112);
          float4 _2124 = ImageSampleExplicitLod(_2123, _2122, Lod(0.0000));
          float _2125 = _2124.w;
          float* _2126 = &cpass_cb.clouds_pre_fade;
          float _2127 = *_2126;
          float _2128 = _2077 * _2127;
          float _2129 = _2125 + _2128;
          float _2130 = GLSL.std.450::FClamp(_2129, 0.0000, 1.0000);
          float* _2131 = &cpass_cb.clouds_midpoint;
          float _2132 = *_2131;
          float* _2133 = &cpass_cb.clouds_sharpness;
          float _2134 = *_2133;
          float _2135 = 1.0000 - _2134;
          float _2136 = GLSL.std.450::NMax(0.0010, _2135);
          float _2137 = 2.0000 / _2136;
          float _2138 = _2137 - 1.0000;
          float _2139 = 1.0000 - _2132;
          float _2140 = GLSL.std.450::NMax(_2132, _2130);
          float _2141 = 1.0000 - _2140;
          float _2142 = GLSL.std.450::FClamp(_2141, 0.0000, 1.0000);
          float _2143 = GLSL.std.450::Pow(_2142, _2138);
          float _2144 = -_2143;
          float _2145 = GLSL.std.450::FClamp(_2139, 0.0000, 1.0000);
          float _2146 = 2.0000 - _2137;
          float _2147 = GLSL.std.450::Pow(_2145, _2146);
          float _2148 = _2144 * _2147;
          float _2149 = GLSL.std.450::NMin(_2132, _2130);
          float _2150 = GLSL.std.450::FClamp(_2149, 0.0000, 1.0000);
          float _2151 = GLSL.std.450::Pow(_2150, _2138);
          float _2152 = GLSL.std.450::FClamp(_2132, 0.0000, 1.0000);
          float _2153 = GLSL.std.450::Pow(_2152, _2146);
          float _2154 = _2151 * _2153;
          float _2155 = _2148 + _2154;
          float _2156 = _2139 + _2155;
          float _2157 = GLSL.std.450::FClamp(_2156, 0.0000, 1.0000);
          float* _2158 = &cpass_cb.clouds_post_fade;
          float _2159 = *_2158;
          float _2160 = _2077 * _2159;
          float _2161 = _2157 + _2160;
          float _2162 = GLSL.std.450::FClamp(_2161, 0.0000, 1.0000);
          float* _2163 = &cpass_cb.clouds_intensity;
          float _2164 = *_2163;
          float _2165 = GLSL.std.450::FMix(1.0000, _2162, _2164);
          float _2166 = _2062 * _2165;
        }

        float _2167 = Phi(_2062, _2166);
        break;
    }

    float _2168 = Phi(0.0000, _2167);
    float4 _2169 = CompositeInsert(_2168, _1789, {2});
  }

  float4 _2170 = Phi(_1789, _2169);
  float* _2171 = &dynamic_light_infos._child0[_1024].shadow_enabled.x;
  float _2172 = *_2171;
  bool _2173 = _2172 > 0.0000;
  [[DontFlatten]]
  if(_2173) {
    float _2176 = _275.x;
    float _2177 = _275.y;
    float _2178 = _275.z;
    float4 _2179 = CompositeConstruct({_2176, _2177, _2178, 1.0000});
    float4x4* _2180 = &dynamic_light_infos._child0[_1024].light_matrix;
    float4x4 _2181 = *_2180;
    float4* _2182 = &dynamic_light_infos._child0[_1024].shadow_scale;
    float4 _2183 = *_2182;
    float4* _2184 = &dynamic_light_infos._child0[_1024].shadow_atlas_offset_scale;
    float4 _2185 = *_2184;
    type.2d.image _2186 = *tex_shadow_map_atlas;
    
    switch(0) {
      default:
        float4 _2189 = _2181 * _2179;
        bool _2190 = _1027 == 2;
        
        if(_2190) {
          float3 _2194 = _2189.xyz;
          float3 _2195 = GLSL.std.450::Normalize(_2194);
          float3 _2196 = _2195 + {0.0000, 0.0000, 1.0000};
          float _2197 = _2196.z;
          float3 _2198 = CompositeConstruct({_2197, _2197, _2197});
          float3 _2199 = _2196 / _2198;
          float _2200 = GLSL.std.450::Length(_2194);
          float _2201 = _2199.x;
          float _2202 = _2199.y;
          float3 _2203 = CompositeConstruct({_2201, _2202, _2200});
          float _2204 = _2189.z;
          bool _2205 = _2204 > 0.0000;
          
          if(_2205) {
          } else {
            float2 _2209 = _2203.xy;
            float2 _2210 = GLSL.std.450::Normalize(_2209);
            float2 _2211 = _2210 * 10000000.0000;
            float _2212 = -_2200;
            float _2213 = _2211.x;
            float _2214 = _2211.y;
            float3 _2215 = CompositeConstruct({_2213, _2214, _2212});
          }

          float3 _2216 = Phi(_2203, _2215);
          float _2217 = _2216.x;
          float _2218 = _2217 * 0.5000;
          float _2219 = _2218 + 0.5000;
          float _2220 = _2216.y;
          float _2221 = _2220 * 0.5000;
          float _2222 = 0.5000 - _2221;
          float _2223 = _2216.z;
          float3 _2224 = CompositeConstruct({_2219, _2222, _2223});
          float _2225 = _2223 * 0.0001;
          float3 _2226 = CompositeInsert(_2225, _2224, {2});
          bool _2227 = _2204 < 0.0000;
          
          if(_2227) {
            break;
          }

        } else {
          float3 _2230 = _2189.xyz;
          bool _2231 = _1027 == 1;
          
          if(_2231) {
            float _2234 = _2189.z;
            float _2235 = _2183.z;
            float _2236 = _2234 * _2235;
            float _2237 = _2236 + 1.0000;
            float _2238 = _2189.w;
            float _2239 = _2237 / _2238;
            float _2240 = _2234 - _2239;
            float3 _2241 = CompositeInsert(_2240, _2230, {2});
          }

          float3 _2242 = Phi(_2230, _2241);
          float _2243 = _2189.w;
          float3 _2244 = CompositeConstruct({_2243, _2243, _2243});
          float3 _2245 = _2242 / _2244;
        }

        float3 _2246 = Phi(_2226, _2245);
        float2 _2247 = _2183.xy;
        float _2248 = _2183.w;
        bool _2249 = _2248 > 0.0000;
        
        if(_2249) {
          float2 _2252 = _2246.xy;
          float2 _2253 = GLSL.std.450::FClamp(_2252, {0.0000, 0.0000}, {1.0000, 1.0000});
          float2 _2254 = _2185.zw;
          float2 _2255 = _2253 * _2254;
          float2 _2256 = _2185.xy;
          float2 _2257 = _2255 + _2256;
          float _2258 = _2246.z;
          float _2259 = _2257.x;
          float _2260 = _2257.y;
          float4 _2261 = CompositeConstruct({_2259, _2260, 0.0000, 0.0000});
          float2 _2262 = _2261.xy;
          type.sampled.image _2263 = SampledImage(_2186, _648);
          float4 _2264 = ImageSampleExplicitLod(_2263, _2262, Lod(0.0000));
          float _2265 = _2264.x;
          float _2266 = _2258 - _2265;
          float _2267 = GLSL.std.450::NMax(-100000.0000, _2266);
          float2 _2268 = {1.0000, 0.0000} * _2247;
          float2 _2269 = _2252 + _2268;
          float2 _2270 = GLSL.std.450::FClamp(_2269, {0.0000, 0.0000}, {1.0000, 1.0000});
          float2 _2271 = _2270 * _2254;
          float2 _2272 = _2271 + _2256;
          float _2273 = _2272.x;
          float _2274 = _2272.y;
          float4 _2275 = CompositeConstruct({_2273, _2274, 0.0000, 0.0000});
          float2 _2276 = _2275.xy;
          type.sampled.image _2277 = SampledImage(_2186, _648);
          float4 _2278 = ImageSampleExplicitLod(_2277, _2276, Lod(0.0000));
          float _2279 = _2278.x;
          float _2280 = _2258 - _2279;
          float _2281 = GLSL.std.450::NMax(_2267, _2280);
          float2 _2282 = {0.5000, 0.8660} * _2247;
          float2 _2283 = _2252 + _2282;
          float2 _2284 = GLSL.std.450::FClamp(_2283, {0.0000, 0.0000}, {1.0000, 1.0000});
          float2 _2285 = _2284 * _2254;
          float2 _2286 = _2285 + _2256;
          float _2287 = _2286.x;
          float _2288 = _2286.y;
          float4 _2289 = CompositeConstruct({_2287, _2288, 0.0000, 0.0000});
          float2 _2290 = _2289.xy;
          type.sampled.image _2291 = SampledImage(_2186, _648);
          float4 _2292 = ImageSampleExplicitLod(_2291, _2290, Lod(0.0000));
          float _2293 = _2292.x;
          float _2294 = _2258 - _2293;
          float _2295 = GLSL.std.450::NMax(_2281, _2294);
          float2 _2296 = {-0.5000, 0.8660} * _2247;
          float2 _2297 = _2252 + _2296;
          float2 _2298 = GLSL.std.450::FClamp(_2297, {0.0000, 0.0000}, {1.0000, 1.0000});
          float2 _2299 = _2298 * _2254;
          float2 _2300 = _2299 + _2256;
          float _2301 = _2300.x;
          float _2302 = _2300.y;
          float4 _2303 = CompositeConstruct({_2301, _2302, 0.0000, 0.0000});
          float2 _2304 = _2303.xy;
          type.sampled.image _2305 = SampledImage(_2186, _648);
          float4 _2306 = ImageSampleExplicitLod(_2305, _2304, Lod(0.0000));
          float _2307 = _2306.x;
          float _2308 = _2258 - _2307;
          float _2309 = GLSL.std.450::NMax(_2295, _2308);
          float2 _2310 = {-1.0000, -0.0000} * _2247;
          float2 _2311 = _2252 + _2310;
          float2 _2312 = GLSL.std.450::FClamp(_2311, {0.0000, 0.0000}, {1.0000, 1.0000});
          float2 _2313 = _2312 * _2254;
          float2 _2314 = _2313 + _2256;
          float _2315 = _2314.x;
          float _2316 = _2314.y;
          float4 _2317 = CompositeConstruct({_2315, _2316, 0.0000, 0.0000});
          float2 _2318 = _2317.xy;
          type.sampled.image _2319 = SampledImage(_2186, _648);
          float4 _2320 = ImageSampleExplicitLod(_2319, _2318, Lod(0.0000));
          float _2321 = _2320.x;
          float _2322 = _2258 - _2321;
          float _2323 = GLSL.std.450::NMax(_2309, _2322);
          float2 _2324 = {-0.5000, -0.8660} * _2247;
          float2 _2325 = _2252 + _2324;
          float2 _2326 = GLSL.std.450::FClamp(_2325, {0.0000, 0.0000}, {1.0000, 1.0000});
          float2 _2327 = _2326 * _2254;
          float2 _2328 = _2327 + _2256;
          float _2329 = _2328.x;
          float _2330 = _2328.y;
          float4 _2331 = CompositeConstruct({_2329, _2330, 0.0000, 0.0000});
          float2 _2332 = _2331.xy;
          type.sampled.image _2333 = SampledImage(_2186, _648);
          float4 _2334 = ImageSampleExplicitLod(_2333, _2332, Lod(0.0000));
          float _2335 = _2334.x;
          float _2336 = _2258 - _2335;
          float _2337 = GLSL.std.450::NMax(_2323, _2336);
          float2 _2338 = {0.5000, -0.8660} * _2247;
          float2 _2339 = _2252 + _2338;
          float2 _2340 = GLSL.std.450::FClamp(_2339, {0.0000, 0.0000}, {1.0000, 1.0000});
          float2 _2341 = _2340 * _2254;
          float2 _2342 = _2341 + _2256;
          float _2343 = _2342.x;
          float _2344 = _2342.y;
          float4 _2345 = CompositeConstruct({_2343, _2344, 0.0000, 0.0000});
          float2 _2346 = _2345.xy;
          type.sampled.image _2347 = SampledImage(_2186, _648);
          float4 _2348 = ImageSampleExplicitLod(_2347, _2346, Lod(0.0000));
          float _2349 = _2348.x;
          float _2350 = _2258 - _2349;
          float _2351 = GLSL.std.450::NMax(_2337, _2350);
          float _2352 = _2248 * _2351;
          float _2353 = 0.2000 + _2352;
          float _2354 = GLSL.std.450::FClamp(_2353, 0.0000, 1.0000);
        }

        float _2355 = Phi(1.0000, _2354);
        float2 _2356 = _2247 * _2355;
        float2 _2357 = _2246.xy;
        float2 _2358 = GLSL.std.450::FClamp(_2357, {0.0000, 0.0000}, {1.0000, 1.0000});
        float2 _2359 = _2185.zw;
        float2 _2360 = _2358 * _2359;
        float2 _2361 = _2185.xy;
        float2 _2362 = _2360 + _2361;
        float _2363 = _2246.z;
        float _2364 = _2362.x;
        float _2365 = _2362.y;
        type.sampler _2366 = *SamplerDepth;
        float4 _2367 = CompositeConstruct({_2364, _2365, _2363, 1.0000});
        float2 _2368 = _2367.xy;
        type.sampled.image _2369 = SampledImage(_2186, _2366);
        float _2370 = ImageSampleDrefExplicitLod(_2369, _2368, _2363, Lod(0.0000));
        float2 _2371 = {1.0000, 0.0000} * _2356;
        float2 _2372 = _2357 + _2371;
        float2 _2373 = GLSL.std.450::FClamp(_2372, {0.0000, 0.0000}, {1.0000, 1.0000});
        float2 _2374 = _2373 * _2359;
        float2 _2375 = _2374 + _2361;
        float _2376 = _2375.x;
        float _2377 = _2375.y;
        float4 _2378 = CompositeConstruct({_2376, _2377, _2363, 1.0000});
        float2 _2379 = _2378.xy;
        type.sampled.image _2380 = SampledImage(_2186, _2366);
        float _2381 = ImageSampleDrefExplicitLod(_2380, _2379, _2363, Lod(0.0000));
        float _2382 = _2370 + _2381;
        float2 _2383 = {0.5000, 0.8660} * _2356;
        float2 _2384 = _2357 + _2383;
        float2 _2385 = GLSL.std.450::FClamp(_2384, {0.0000, 0.0000}, {1.0000, 1.0000});
        float2 _2386 = _2385 * _2359;
        float2 _2387 = _2386 + _2361;
        float _2388 = _2387.x;
        float _2389 = _2387.y;
        float4 _2390 = CompositeConstruct({_2388, _2389, _2363, 1.0000});
        float2 _2391 = _2390.xy;
        type.sampled.image _2392 = SampledImage(_2186, _2366);
        float _2393 = ImageSampleDrefExplicitLod(_2392, _2391, _2363, Lod(0.0000));
        float _2394 = _2382 + _2393;
        float2 _2395 = {-0.5000, 0.8660} * _2356;
        float2 _2396 = _2357 + _2395;
        float2 _2397 = GLSL.std.450::FClamp(_2396, {0.0000, 0.0000}, {1.0000, 1.0000});
        float2 _2398 = _2397 * _2359;
        float2 _2399 = _2398 + _2361;
        float _2400 = _2399.x;
        float _2401 = _2399.y;
        float4 _2402 = CompositeConstruct({_2400, _2401, _2363, 1.0000});
        float2 _2403 = _2402.xy;
        type.sampled.image _2404 = SampledImage(_2186, _2366);
        float _2405 = ImageSampleDrefExplicitLod(_2404, _2403, _2363, Lod(0.0000));
        float _2406 = _2394 + _2405;
        float2 _2407 = {-1.0000, -0.0000} * _2356;
        float2 _2408 = _2357 + _2407;
        float2 _2409 = GLSL.std.450::FClamp(_2408, {0.0000, 0.0000}, {1.0000, 1.0000});
        float2 _2410 = _2409 * _2359;
        float2 _2411 = _2410 + _2361;
        float _2412 = _2411.x;
        float _2413 = _2411.y;
        float4 _2414 = CompositeConstruct({_2412, _2413, _2363, 1.0000});
        float2 _2415 = _2414.xy;
        type.sampled.image _2416 = SampledImage(_2186, _2366);
        float _2417 = ImageSampleDrefExplicitLod(_2416, _2415, _2363, Lod(0.0000));
        float _2418 = _2406 + _2417;
        float2 _2419 = {-0.5000, -0.8660} * _2356;
        float2 _2420 = _2357 + _2419;
        float2 _2421 = GLSL.std.450::FClamp(_2420, {0.0000, 0.0000}, {1.0000, 1.0000});
        float2 _2422 = _2421 * _2359;
        float2 _2423 = _2422 + _2361;
        float _2424 = _2423.x;
        float _2425 = _2423.y;
        float4 _2426 = CompositeConstruct({_2424, _2425, _2363, 1.0000});
        float2 _2427 = _2426.xy;
        type.sampled.image _2428 = SampledImage(_2186, _2366);
        float _2429 = ImageSampleDrefExplicitLod(_2428, _2427, _2363, Lod(0.0000));
        float _2430 = _2418 + _2429;
        float2 _2431 = {0.5000, -0.8660} * _2356;
        float2 _2432 = _2357 + _2431;
        float2 _2433 = GLSL.std.450::FClamp(_2432, {0.0000, 0.0000}, {1.0000, 1.0000});
        float2 _2434 = _2433 * _2359;
        float2 _2435 = _2434 + _2361;
        float _2436 = _2435.x;
        float _2437 = _2435.y;
        float4 _2438 = CompositeConstruct({_2436, _2437, _2363, 1.0000});
        float2 _2439 = _2438.xy;
        type.sampled.image _2440 = SampledImage(_2186, _2366);
        float _2441 = ImageSampleDrefExplicitLod(_2440, _2439, _2363, Lod(0.0000));
        float _2442 = _2430 + _2441;
        float _2443 = _2442 * 0.1429;
        bool _2444 = _1027 == 0;
        
        if(_2444) {
          float4* _2447 = &cpass_cb.player_position;
          float4 _2448 = *_2447;
          float2 _2449 = _2448.xy;
          float2 _2450 = _2179.xy;
          float2 _2451 = _2449 - _2450;
          float _2452 = GLSL.std.450::Length(_2451);
          float* _2453 = &cpass_cb.clouds_fade_radius;
          float _2454 = *_2453;
          float _2455 = _2452 / _2454;
          float _2456 = 1.0000 - _2455;
          float _2457 = GLSL.std.450::FClamp(_2456, 0.0000, 1.0000);
          float _2458 = GLSL.std.450::SmoothStep(0.0000, 1.0000, _2457);
          float4x4 _2459 = Transpose(_2181);
          float4 _2460 = _2459[2];
          float3 _2461 = _2460.xyz;
          float4* _2462 = &cpass_cb.clouds_velocity;
          float4 _2463 = *_2462;
          float2 _2464 = _2463.xy;
          float _2465 = GLSL.std.450::Length(_2464);
          bool _2466 = _2465 > 0.1000;
          
          if(_2466) {
            float _2470 = _2463.x;
            float _2471 = _2463.y;
            float3 _2472 = CompositeConstruct({_2470, _2471, 0.0000});
            float3 _2473 = GLSL.std.450::Normalize(_2472);
          } else {
          }

          float3 _2474 = Phi(_2473, {1.0000, 0.0000, 0.0000});
          float _2475 = _2474.y;
          float _2476 = -_2475;
          float _2477 = _2474.x;
          float3 _2478 = CompositeConstruct({_2476, _2477, 0.0000});
          float3 _2479 = GLSL.std.450::Normalize(_2478);
          float3 _2480 = _2179.xyz;
          float _2481 = _2460.z;
          float3 _2482 = CompositeConstruct({_2481, _2481, _2481});
          float3 _2483 = _2461 / _2482;
          float3 _2484 = _2483 * 1000.0000;
          float3 _2485 = _2480 - _2484;
          float _2486 = Dot(_2474, _2485);
          float _2487 = Dot(_2479, _2485);
          float2 _2488 = CompositeConstruct({_2486, _2487});
          float* _2489 = &cpass_cb.clouds_scale;
          float _2490 = *_2489;
          float _2491 = 0.0010 * _2490;
          type.2d.image _2492 = *noise_sampler;
          type.sampler _2493 = *SamplerLinearWrapNoBias;
          float2 _2494 = CompositeConstruct({_2465, 0.0000});
          float* _2495 = &cpass_cb.time;
          float _2496 = *_2495;
          float2 _2497 = _2494 * _2496;
          float2 _2498 = _2488 + _2497;
          float2 _2499 = _2498 * _2491;
          float _2500 = _2499.x;
          float _2501 = _2499.y;
          float4 _2502 = CompositeConstruct({_2500, _2501, 0.0000, 0.0000});
          float2 _2503 = _2502.xy;
          type.sampled.image _2504 = SampledImage(_2492, _2493);
          float4 _2505 = ImageSampleExplicitLod(_2504, _2503, Lod(0.0000));
          float _2506 = _2505.w;
          float* _2507 = &cpass_cb.clouds_pre_fade;
          float _2508 = *_2507;
          float _2509 = _2458 * _2508;
          float _2510 = _2506 + _2509;
          float _2511 = GLSL.std.450::FClamp(_2510, 0.0000, 1.0000);
          float* _2512 = &cpass_cb.clouds_midpoint;
          float _2513 = *_2512;
          float* _2514 = &cpass_cb.clouds_sharpness;
          float _2515 = *_2514;
          float _2516 = 1.0000 - _2515;
          float _2517 = GLSL.std.450::NMax(0.0010, _2516);
          float _2518 = 2.0000 / _2517;
          float _2519 = _2518 - 1.0000;
          float _2520 = 1.0000 - _2513;
          float _2521 = GLSL.std.450::NMax(_2513, _2511);
          float _2522 = 1.0000 - _2521;
          float _2523 = GLSL.std.450::FClamp(_2522, 0.0000, 1.0000);
          float _2524 = GLSL.std.450::Pow(_2523, _2519);
          float _2525 = -_2524;
          float _2526 = GLSL.std.450::FClamp(_2520, 0.0000, 1.0000);
          float _2527 = 2.0000 - _2518;
          float _2528 = GLSL.std.450::Pow(_2526, _2527);
          float _2529 = _2525 * _2528;
          float _2530 = GLSL.std.450::NMin(_2513, _2511);
          float _2531 = GLSL.std.450::FClamp(_2530, 0.0000, 1.0000);
          float _2532 = GLSL.std.450::Pow(_2531, _2519);
          float _2533 = GLSL.std.450::FClamp(_2513, 0.0000, 1.0000);
          float _2534 = GLSL.std.450::Pow(_2533, _2527);
          float _2535 = _2532 * _2534;
          float _2536 = _2529 + _2535;
          float _2537 = _2520 + _2536;
          float _2538 = GLSL.std.450::FClamp(_2537, 0.0000, 1.0000);
          float* _2539 = &cpass_cb.clouds_post_fade;
          float _2540 = *_2539;
          float _2541 = _2458 * _2540;
          float _2542 = _2538 + _2541;
          float _2543 = GLSL.std.450::FClamp(_2542, 0.0000, 1.0000);
          float* _2544 = &cpass_cb.clouds_intensity;
          float _2545 = *_2544;
          float _2546 = GLSL.std.450::FMix(1.0000, _2543, _2545);
          float _2547 = _2443 * _2546;
        }

        float _2548 = Phi(_2443, _2547);
        break;
    }

    float _2549 = Phi(0.0000, _2548);
    float4 _2550 = CompositeInsert(_2549, _2170, {3});
  }

  float4 _2551 = Phi(_2170, _2550);
  float4* _2552 = &dynamic_light_infos._child0[_1012].light_position;
  float4 _2553 = *_2552;
  float4* _2554 = &dynamic_light_infos._child0[_1012].light_direction;
  float4 _2555 = *_2554;
  float4* _2556 = &dynamic_light_infos._child0[_1012].light_color;
  float4 _2557 = *_2556;
  
  switch(_1015) {
    case 0:
      float3 _2562 = _2555.xyz;
      float3 _2563 = -_2562;
      float3 _2564 = _2557.xyz;
      break;
    case 1:
      float3 _2565 = _2553.xyz;
      float3 _2566 = _2565 - _278;
      float _2567 = GLSL.std.450::Length(_2566);
      float3 _2568 = CompositeConstruct({_2567, _2567, _2567});
      float3 _2569 = _2566 / _2568;
      float _2570 = _2557.w;
      float _2571 = _2567 / _2570;
      float _2572 = GLSL.std.450::FClamp(_2571, 0.0000, 1.0000);
      float _2573 = 1.0000 - _2572;
      float3 _2574 = _2555.xyz;
      float3 _2575 = -_2574;
      float _2576 = Dot(_2575, _2569);
      float _2577 = _2555.w;
      float _2578 = _2553.w;
      float _2579 = _2576 - _2577;
      float _2580 = _2578 - _2577;
      float _2581 = _2579 / _2580;
      float _2582 = GLSL.std.450::FClamp(_2581, 0.0000, 1.0000);
      float _2583 = _2573 * _2582;
      float3 _2584 = _2557.xyz;
      float3 _2585 = _2584 * _2583;
      break;
    case 2:
      float3 _2586 = _2553.xyz;
      float3 _2587 = _2586 - _278;
      float _2588 = GLSL.std.450::Length(_2587);
      float3 _2589 = CompositeConstruct({_2588, _2588, _2588});
      float3 _2590 = _2587 / _2589;
      float _2591 = _2557.w;
      float _2592 = _2553.w;
      float _2593 = GLSL.std.450::FClamp(_2592, 0.0000, 1.0000);
      float _2594 = GLSL.std.450::FMix(100.0000, 7.0711, _2593);
      float _2595 = 0.2000 * _2594;
      float _2596 = _2595 * _2594;
      float _2597 = _2591 / _2594;
      float _2598 = _2588 / _2597;
      float _2599 = _2598 + 1.0000;
      float _2600 = _2588 / _2591;
      float _2601 = _2600 * _2600;
      float _2602 = _2601 * _2600;
      float _2603 = _2602 * _2600;
      float _2604 = 1.0000 - _2603;
      float _2605 = GLSL.std.450::FClamp(_2604, 0.0000, 1.0000);
      float _2606 = _2605 * _2605;
      float _2607 = _2596 * _2606;
      float _2608 = _2599 * _2599;
      float _2609 = _2607 / _2608;
      float _2610 = GLSL.std.450::NMin(10.0000, _2609);
      float3 _2611 = _2557.xyz;
      float3 _2612 = _2611 * _2610;
      break;
  }

  float3 _2613 = Phi({0.0000, 0.0000, 0.0000}, _2563, _2569, _2590);
  float3 _2614 = Phi({0.0000, 0.0000, 0.0000}, _2564, _2585, _2612);
  float _2615 = _2551.x;
  float3 _2616 = _2614 * _2615;
  float _2617 = GLSL.std.450::Length(_2616);
  bool _2618 = _2617 > 0.0000;
  
  if(_2618) {
    float _2621 = Dot(_2613, _794);
    float _2622 = GLSL.std.450::FClamp(_2621, 0.0000, 1.0000);
    float3 _2623 = _2616 * _2622;
    float3 _2624 = CompositeConstruct({_2621, _2621, _2621});
    float3 _2625 = _2624 + {1.0000, 1.0000, 1.0000};
    float3 _2626 = _2625 * {0.5000, 0.5000, 0.5000};
    float3 _2627 = GLSL.std.450::FClamp(_2626, {0.0000, 0.0000, 0.0000}, {1.0000, 1.0000, 1.0000});
    float3 _2628 = _2627 * 1.0000;
    float3 _2629 = _2628 * _2616;
    float _2630 = 1.0000 - _364;
    float _2631 = GLSL.std.450::FClamp(_2630, 0.0000, 1.0000);
    float _2632 = _2631 * _2631;
    float _2633 = GLSL.std.450::NMax(_2632, 0.0020);
    float _2634 = _2633 * _2633;
    float3 _2635 = -_707;
    float3 _2636 = _2635 + _2613;
    float3 _2637 = GLSL.std.450::Normalize(_2636);
    float _2638 = Dot(_794, _2637);
    float _2639 = GLSL.std.450::FClamp(_2638, 0.0000, 1.0000);
    float _2640 = Dot(_2635, _794);
    float _2641 = GLSL.std.450::FClamp(_2640, 0.0000, 1.0000);
    float _2642 = Dot(_2635, _2637);
    float _2643 = GLSL.std.450::FClamp(_2642, 0.0000, 1.0000);
    float _2644 = _2634 - 1.0000;
    float _2645 = _2644 * _2639;
    float _2646 = _2645 * _2639;
    float _2647 = _2646 + 1.0000;
    float _2648 = GLSL.std.450::Pow(_2647, 2.0000);
    float _2649 = _2634 / _2648;
    float _2650 = _2633 * 0.5000;
    float _2651 = 1.0000 - _2650;
    float _2652 = _2641 * _2651;
    float _2653 = _2652 + _2650;
    float _2654 = _2622 * _2651;
    float _2655 = _2654 + _2650;
    float _2656 = _2653 * _2655;
    float _2657 = 1.0000 / _2656;
    float _2658 = -5.5547 * _2643;
    float _2659 = _2658 - 6.9832;
    float _2660 = _2659 * _2643;
    float _2661 = GLSL.std.450::Exp2(_2660);
    float3 _2662 = CompositeConstruct({_2661, _2661, _2661});
    float3 _2663 = GLSL.std.450::FMix(_2662, {1.0000, 1.0000, 1.0000}, {0.0400, 0.0400, 0.0400});
    float3 _2664 = _2663 * _2649;
    float3 _2665 = _2664 * _2657;
    float3 _2666 = _2665 * _2622;
    float3 _2667 = _2666 * {0.2500, 0.2500, 0.2500};
    float3 _2668 = _2667 * _2616;
    float3 _2669 = _879 + _2616;
    float3 _2670 = _338.xyz;
    float3 _2671 = _2623 * _2670;
    float3 _2672 = _877 + _2671;
    float3 _2673 = _875 + _2668;
    float3 _2674 = _2629 * _788;
    float3 _2675 = _873 + _2674;
  }

  float3 _2676 = Phi(_873, _2675);
  float3 _2677 = Phi(_875, _2673);
  float3 _2678 = Phi(_877, _2672);
  float3 _2679 = Phi(_879, _2669);
  float4* _2680 = &dynamic_light_infos._child0[_1016].light_position;
  float4 _2681 = *_2680;
  float4* _2682 = &dynamic_light_infos._child0[_1016].light_direction;
  float4 _2683 = *_2682;
  float4* _2684 = &dynamic_light_infos._child0[_1016].light_color;
  float4 _2685 = *_2684;
  
  switch(_1019) {
    case 0:
      float3 _2690 = _2683.xyz;
      float3 _2691 = -_2690;
      float3 _2692 = _2685.xyz;
      break;
    case 1:
      float3 _2693 = _2681.xyz;
      float3 _2694 = _2693 - _278;
      float _2695 = GLSL.std.450::Length(_2694);
      float3 _2696 = CompositeConstruct({_2695, _2695, _2695});
      float3 _2697 = _2694 / _2696;
      float _2698 = _2685.w;
      float _2699 = _2695 / _2698;
      float _2700 = GLSL.std.450::FClamp(_2699, 0.0000, 1.0000);
      float _2701 = 1.0000 - _2700;
      float3 _2702 = _2683.xyz;
      float3 _2703 = -_2702;
      float _2704 = Dot(_2703, _2697);
      float _2705 = _2683.w;
      float _2706 = _2681.w;
      float _2707 = _2704 - _2705;
      float _2708 = _2706 - _2705;
      float _2709 = _2707 / _2708;
      float _2710 = GLSL.std.450::FClamp(_2709, 0.0000, 1.0000);
      float _2711 = _2701 * _2710;
      float3 _2712 = _2685.xyz;
      float3 _2713 = _2712 * _2711;
      break;
    case 2:
      float3 _2714 = _2681.xyz;
      float3 _2715 = _2714 - _278;
      float _2716 = GLSL.std.450::Length(_2715);
      float3 _2717 = CompositeConstruct({_2716, _2716, _2716});
      float3 _2718 = _2715 / _2717;
      float _2719 = _2685.w;
      float _2720 = _2681.w;
      float _2721 = GLSL.std.450::FClamp(_2720, 0.0000, 1.0000);
      float _2722 = GLSL.std.450::FMix(100.0000, 7.0711, _2721);
      float _2723 = 0.2000 * _2722;
      float _2724 = _2723 * _2722;
      float _2725 = _2719 / _2722;
      float _2726 = _2716 / _2725;
      float _2727 = _2726 + 1.0000;
      float _2728 = _2716 / _2719;
      float _2729 = _2728 * _2728;
      float _2730 = _2729 * _2728;
      float _2731 = _2730 * _2728;
      float _2732 = 1.0000 - _2731;
      float _2733 = GLSL.std.450::FClamp(_2732, 0.0000, 1.0000);
      float _2734 = _2733 * _2733;
      float _2735 = _2724 * _2734;
      float _2736 = _2727 * _2727;
      float _2737 = _2735 / _2736;
      float _2738 = GLSL.std.450::NMin(10.0000, _2737);
      float3 _2739 = _2685.xyz;
      float3 _2740 = _2739 * _2738;
      break;
  }

  float3 _2741 = Phi({0.0000, 0.0000, 0.0000}, _2691, _2697, _2718);
  float3 _2742 = Phi({0.0000, 0.0000, 0.0000}, _2692, _2713, _2740);
  float _2743 = _2551.y;
  float3 _2744 = _2742 * _2743;
  float _2745 = GLSL.std.450::Length(_2744);
  bool _2746 = _2745 > 0.0000;
  
  if(_2746) {
    float _2749 = Dot(_2741, _794);
    float _2750 = GLSL.std.450::FClamp(_2749, 0.0000, 1.0000);
    float3 _2751 = _2744 * _2750;
    float3 _2752 = CompositeConstruct({_2749, _2749, _2749});
    float3 _2753 = _2752 + {1.0000, 1.0000, 1.0000};
    float3 _2754 = _2753 * {0.5000, 0.5000, 0.5000};
    float3 _2755 = GLSL.std.450::FClamp(_2754, {0.0000, 0.0000, 0.0000}, {1.0000, 1.0000, 1.0000});
    float3 _2756 = _2755 * 1.0000;
    float3 _2757 = _2756 * _2744;
    float _2758 = 1.0000 - _364;
    float _2759 = GLSL.std.450::FClamp(_2758, 0.0000, 1.0000);
    float _2760 = _2759 * _2759;
    float _2761 = GLSL.std.450::NMax(_2760, 0.0020);
    float _2762 = _2761 * _2761;
    float3 _2763 = -_707;
    float3 _2764 = _2763 + _2741;
    float3 _2765 = GLSL.std.450::Normalize(_2764);
    float _2766 = Dot(_794, _2765);
    float _2767 = GLSL.std.450::FClamp(_2766, 0.0000, 1.0000);
    float _2768 = Dot(_2763, _794);
    float _2769 = GLSL.std.450::FClamp(_2768, 0.0000, 1.0000);
    float _2770 = Dot(_2763, _2765);
    float _2771 = GLSL.std.450::FClamp(_2770, 0.0000, 1.0000);
    float _2772 = _2762 - 1.0000;
    float _2773 = _2772 * _2767;
    float _2774 = _2773 * _2767;
    float _2775 = _2774 + 1.0000;
    float _2776 = GLSL.std.450::Pow(_2775, 2.0000);
    float _2777 = _2762 / _2776;
    float _2778 = _2761 * 0.5000;
    float _2779 = 1.0000 - _2778;
    float _2780 = _2769 * _2779;
    float _2781 = _2780 + _2778;
    float _2782 = _2750 * _2779;
    float _2783 = _2782 + _2778;
    float _2784 = _2781 * _2783;
    float _2785 = 1.0000 / _2784;
    float _2786 = -5.5547 * _2771;
    float _2787 = _2786 - 6.9832;
    float _2788 = _2787 * _2771;
    float _2789 = GLSL.std.450::Exp2(_2788);
    float3 _2790 = CompositeConstruct({_2789, _2789, _2789});
    float3 _2791 = GLSL.std.450::FMix(_2790, {1.0000, 1.0000, 1.0000}, {0.0400, 0.0400, 0.0400});
    float3 _2792 = _2791 * _2777;
    float3 _2793 = _2792 * _2785;
    float3 _2794 = _2793 * _2750;
    float3 _2795 = _2794 * {0.2500, 0.2500, 0.2500};
    float3 _2796 = _2795 * _2744;
    float3 _2797 = _2679 + _2744;
    float3 _2798 = _338.xyz;
    float3 _2799 = _2751 * _2798;
    float3 _2800 = _2678 + _2799;
    float3 _2801 = _2677 + _2796;
    float3 _2802 = _2757 * _788;
    float3 _2803 = _2676 + _2802;
  }

  float3 _2804 = Phi(_2676, _2803);
  float3 _2805 = Phi(_2677, _2801);
  float3 _2806 = Phi(_2678, _2800);
  float3 _2807 = Phi(_2679, _2797);
  float4* _2808 = &dynamic_light_infos._child0[_1020].light_position;
  float4 _2809 = *_2808;
  float4* _2810 = &dynamic_light_infos._child0[_1020].light_direction;
  float4 _2811 = *_2810;
  float4* _2812 = &dynamic_light_infos._child0[_1020].light_color;
  float4 _2813 = *_2812;
  
  switch(_1023) {
    case 0:
      float3 _2818 = _2811.xyz;
      float3 _2819 = -_2818;
      float3 _2820 = _2813.xyz;
      break;
    case 1:
      float3 _2821 = _2809.xyz;
      float3 _2822 = _2821 - _278;
      float _2823 = GLSL.std.450::Length(_2822);
      float3 _2824 = CompositeConstruct({_2823, _2823, _2823});
      float3 _2825 = _2822 / _2824;
      float _2826 = _2813.w;
      float _2827 = _2823 / _2826;
      float _2828 = GLSL.std.450::FClamp(_2827, 0.0000, 1.0000);
      float _2829 = 1.0000 - _2828;
      float3 _2830 = _2811.xyz;
      float3 _2831 = -_2830;
      float _2832 = Dot(_2831, _2825);
      float _2833 = _2811.w;
      float _2834 = _2809.w;
      float _2835 = _2832 - _2833;
      float _2836 = _2834 - _2833;
      float _2837 = _2835 / _2836;
      float _2838 = GLSL.std.450::FClamp(_2837, 0.0000, 1.0000);
      float _2839 = _2829 * _2838;
      float3 _2840 = _2813.xyz;
      float3 _2841 = _2840 * _2839;
      break;
    case 2:
      float3 _2842 = _2809.xyz;
      float3 _2843 = _2842 - _278;
      float _2844 = GLSL.std.450::Length(_2843);
      float3 _2845 = CompositeConstruct({_2844, _2844, _2844});
      float3 _2846 = _2843 / _2845;
      float _2847 = _2813.w;
      float _2848 = _2809.w;
      float _2849 = GLSL.std.450::FClamp(_2848, 0.0000, 1.0000);
      float _2850 = GLSL.std.450::FMix(100.0000, 7.0711, _2849);
      float _2851 = 0.2000 * _2850;
      float _2852 = _2851 * _2850;
      float _2853 = _2847 / _2850;
      float _2854 = _2844 / _2853;
      float _2855 = _2854 + 1.0000;
      float _2856 = _2844 / _2847;
      float _2857 = _2856 * _2856;
      float _2858 = _2857 * _2856;
      float _2859 = _2858 * _2856;
      float _2860 = 1.0000 - _2859;
      float _2861 = GLSL.std.450::FClamp(_2860, 0.0000, 1.0000);
      float _2862 = _2861 * _2861;
      float _2863 = _2852 * _2862;
      float _2864 = _2855 * _2855;
      float _2865 = _2863 / _2864;
      float _2866 = GLSL.std.450::NMin(10.0000, _2865);
      float3 _2867 = _2813.xyz;
      float3 _2868 = _2867 * _2866;
      break;
  }

  float3 _2869 = Phi({0.0000, 0.0000, 0.0000}, _2819, _2825, _2846);
  float3 _2870 = Phi({0.0000, 0.0000, 0.0000}, _2820, _2841, _2868);
  float _2871 = _2551.z;
  float3 _2872 = _2870 * _2871;
  float _2873 = GLSL.std.450::Length(_2872);
  bool _2874 = _2873 > 0.0000;
  
  if(_2874) {
    float _2877 = Dot(_2869, _794);
    float _2878 = GLSL.std.450::FClamp(_2877, 0.0000, 1.0000);
    float3 _2879 = _2872 * _2878;
    float3 _2880 = CompositeConstruct({_2877, _2877, _2877});
    float3 _2881 = _2880 + {1.0000, 1.0000, 1.0000};
    float3 _2882 = _2881 * {0.5000, 0.5000, 0.5000};
    float3 _2883 = GLSL.std.450::FClamp(_2882, {0.0000, 0.0000, 0.0000}, {1.0000, 1.0000, 1.0000});
    float3 _2884 = _2883 * 1.0000;
    float3 _2885 = _2884 * _2872;
    float _2886 = 1.0000 - _364;
    float _2887 = GLSL.std.450::FClamp(_2886, 0.0000, 1.0000);
    float _2888 = _2887 * _2887;
    float _2889 = GLSL.std.450::NMax(_2888, 0.0020);
    float _2890 = _2889 * _2889;
    float3 _2891 = -_707;
    float3 _2892 = _2891 + _2869;
    float3 _2893 = GLSL.std.450::Normalize(_2892);
    float _2894 = Dot(_794, _2893);
    float _2895 = GLSL.std.450::FClamp(_2894, 0.0000, 1.0000);
    float _2896 = Dot(_2891, _794);
    float _2897 = GLSL.std.450::FClamp(_2896, 0.0000, 1.0000);
    float _2898 = Dot(_2891, _2893);
    float _2899 = GLSL.std.450::FClamp(_2898, 0.0000, 1.0000);
    float _2900 = _2890 - 1.0000;
    float _2901 = _2900 * _2895;
    float _2902 = _2901 * _2895;
    float _2903 = _2902 + 1.0000;
    float _2904 = GLSL.std.450::Pow(_2903, 2.0000);
    float _2905 = _2890 / _2904;
    float _2906 = _2889 * 0.5000;
    float _2907 = 1.0000 - _2906;
    float _2908 = _2897 * _2907;
    float _2909 = _2908 + _2906;
    float _2910 = _2878 * _2907;
    float _2911 = _2910 + _2906;
    float _2912 = _2909 * _2911;
    float _2913 = 1.0000 / _2912;
    float _2914 = -5.5547 * _2899;
    float _2915 = _2914 - 6.9832;
    float _2916 = _2915 * _2899;
    float _2917 = GLSL.std.450::Exp2(_2916);
    float3 _2918 = CompositeConstruct({_2917, _2917, _2917});
    float3 _2919 = GLSL.std.450::FMix(_2918, {1.0000, 1.0000, 1.0000}, {0.0400, 0.0400, 0.0400});
    float3 _2920 = _2919 * _2905;
    float3 _2921 = _2920 * _2913;
    float3 _2922 = _2921 * _2878;
    float3 _2923 = _2922 * {0.2500, 0.2500, 0.2500};
    float3 _2924 = _2923 * _2872;
    float3 _2925 = _2807 + _2872;
    float3 _2926 = _338.xyz;
    float3 _2927 = _2879 * _2926;
    float3 _2928 = _2806 + _2927;
    float3 _2929 = _2805 + _2924;
    float3 _2930 = _2885 * _788;
    float3 _2931 = _2804 + _2930;
  }

  float3 _2932 = Phi(_2804, _2931);
  float3 _2933 = Phi(_2805, _2929);
  float3 _2934 = Phi(_2806, _2928);
  float3 _2935 = Phi(_2807, _2925);
  float4* _2936 = &dynamic_light_infos._child0[_1024].light_position;
  float4 _2937 = *_2936;
  float4* _2938 = &dynamic_light_infos._child0[_1024].light_direction;
  float4 _2939 = *_2938;
  float4* _2940 = &dynamic_light_infos._child0[_1024].light_color;
  float4 _2941 = *_2940;
  
  switch(_1027) {
    case 0:
      float3 _2946 = _2939.xyz;
      float3 _2947 = -_2946;
      float3 _2948 = _2941.xyz;
      break;
    case 1:
      float3 _2949 = _2937.xyz;
      float3 _2950 = _2949 - _278;
      float _2951 = GLSL.std.450::Length(_2950);
      float3 _2952 = CompositeConstruct({_2951, _2951, _2951});
      float3 _2953 = _2950 / _2952;
      float _2954 = _2941.w;
      float _2955 = _2951 / _2954;
      float _2956 = GLSL.std.450::FClamp(_2955, 0.0000, 1.0000);
      float _2957 = 1.0000 - _2956;
      float3 _2958 = _2939.xyz;
      float3 _2959 = -_2958;
      float _2960 = Dot(_2959, _2953);
      float _2961 = _2939.w;
      float _2962 = _2937.w;
      float _2963 = _2960 - _2961;
      float _2964 = _2962 - _2961;
      float _2965 = _2963 / _2964;
      float _2966 = GLSL.std.450::FClamp(_2965, 0.0000, 1.0000);
      float _2967 = _2957 * _2966;
      float3 _2968 = _2941.xyz;
      float3 _2969 = _2968 * _2967;
      break;
    case 2:
      float3 _2970 = _2937.xyz;
      float3 _2971 = _2970 - _278;
      float _2972 = GLSL.std.450::Length(_2971);
      float3 _2973 = CompositeConstruct({_2972, _2972, _2972});
      float3 _2974 = _2971 / _2973;
      float _2975 = _2941.w;
      float _2976 = _2937.w;
      float _2977 = GLSL.std.450::FClamp(_2976, 0.0000, 1.0000);
      float _2978 = GLSL.std.450::FMix(100.0000, 7.0711, _2977);
      float _2979 = 0.2000 * _2978;
      float _2980 = _2979 * _2978;
      float _2981 = _2975 / _2978;
      float _2982 = _2972 / _2981;
      float _2983 = _2982 + 1.0000;
      float _2984 = _2972 / _2975;
      float _2985 = _2984 * _2984;
      float _2986 = _2985 * _2984;
      float _2987 = _2986 * _2984;
      float _2988 = 1.0000 - _2987;
      float _2989 = GLSL.std.450::FClamp(_2988, 0.0000, 1.0000);
      float _2990 = _2989 * _2989;
      float _2991 = _2980 * _2990;
      float _2992 = _2983 * _2983;
      float _2993 = _2991 / _2992;
      float _2994 = GLSL.std.450::NMin(10.0000, _2993);
      float3 _2995 = _2941.xyz;
      float3 _2996 = _2995 * _2994;
      break;
  }

  float3 _2997 = Phi({0.0000, 0.0000, 0.0000}, _2947, _2953, _2974);
  float3 _2998 = Phi({0.0000, 0.0000, 0.0000}, _2948, _2969, _2996);
  float _2999 = _2551.w;
  float3 _3000 = _2998 * _2999;
  float _3001 = GLSL.std.450::Length(_3000);
  bool _3002 = _3001 > 0.0000;
  
  if(_3002) {
    float _3005 = Dot(_2997, _794);
    float _3006 = GLSL.std.450::FClamp(_3005, 0.0000, 1.0000);
    float3 _3007 = _3000 * _3006;
    float3 _3008 = CompositeConstruct({_3005, _3005, _3005});
    float3 _3009 = _3008 + {1.0000, 1.0000, 1.0000};
    float3 _3010 = _3009 * {0.5000, 0.5000, 0.5000};
    float3 _3011 = GLSL.std.450::FClamp(_3010, {0.0000, 0.0000, 0.0000}, {1.0000, 1.0000, 1.0000});
    float3 _3012 = _3011 * 1.0000;
    float3 _3013 = _3012 * _3000;
    float _3014 = 1.0000 - _364;
    float _3015 = GLSL.std.450::FClamp(_3014, 0.0000, 1.0000);
    float _3016 = _3015 * _3015;
    float _3017 = GLSL.std.450::NMax(_3016, 0.0020);
    float _3018 = _3017 * _3017;
    float3 _3019 = -_707;
    float3 _3020 = _3019 + _2997;
    float3 _3021 = GLSL.std.450::Normalize(_3020);
    float _3022 = Dot(_794, _3021);
    float _3023 = GLSL.std.450::FClamp(_3022, 0.0000, 1.0000);
    float _3024 = Dot(_3019, _794);
    float _3025 = GLSL.std.450::FClamp(_3024, 0.0000, 1.0000);
    float _3026 = Dot(_3019, _3021);
    float _3027 = GLSL.std.450::FClamp(_3026, 0.0000, 1.0000);
    float _3028 = _3018 - 1.0000;
    float _3029 = _3028 * _3023;
    float _3030 = _3029 * _3023;
    float _3031 = _3030 + 1.0000;
    float _3032 = GLSL.std.450::Pow(_3031, 2.0000);
    float _3033 = _3018 / _3032;
    float _3034 = _3017 * 0.5000;
    float _3035 = 1.0000 - _3034;
    float _3036 = _3025 * _3035;
    float _3037 = _3036 + _3034;
    float _3038 = _3006 * _3035;
    float _3039 = _3038 + _3034;
    float _3040 = _3037 * _3039;
    float _3041 = 1.0000 / _3040;
    float _3042 = -5.5547 * _3027;
    float _3043 = _3042 - 6.9832;
    float _3044 = _3043 * _3027;
    float _3045 = GLSL.std.450::Exp2(_3044);
    float3 _3046 = CompositeConstruct({_3045, _3045, _3045});
    float3 _3047 = GLSL.std.450::FMix(_3046, {1.0000, 1.0000, 1.0000}, {0.0400, 0.0400, 0.0400});
    float3 _3048 = _3047 * _3033;
    float3 _3049 = _3048 * _3041;
    float3 _3050 = _3049 * _3006;
    float3 _3051 = _3050 * {0.2500, 0.2500, 0.2500};
    float3 _3052 = _3051 * _3000;
    float3 _3053 = _2935 + _3000;
    float3 _3054 = _338.xyz;
    float3 _3055 = _3007 * _3054;
    float3 _3056 = _2934 + _3055;
    float3 _3057 = _2933 + _3052;
    float3 _3058 = _3013 * _788;
    float3 _3059 = _2932 + _3058;
  }

  float3 _3060 = Phi(_2932, _3059);
  float3 _3061 = Phi(_2934, _3056);
  float3 _3062 = Phi(_2933, _3057);
  float3 _3063 = Phi(_2935, _3053);
  uint* _3064 = &cpass_cb.specular_cube_enabled;
  uint _3065 = *_3064;
  bool _3066 = _3065 != 0;
  
  if(_3066) {
    float _3069 = _795.x;
    float _3070 = _795.y;
    float _3071 = _795.z;
    float4 _3072 = CompositeConstruct({_3069, _3070, _3071, 0.0000});
    float4x4* _3073 = &cpass_cb.env_map_rotation;
    float4x4 _3074 = *_3073;
    float4 _3075 = _3074 * _3072;
    float _3076 = _853.w;
    float _3077 = GLSL.std.450::FClamp(_364, 0.0000, 1.0000);
    float3 _3078 = -_707;
    float _3079 = Dot(_794, _3078);
    float _3080 = GLSL.std.450::FAbs(_3079);
    type.2d.image _3081 = *environment_ggx_sampler;
    float4 _3082 = CompositeConstruct({_3080, _3077, 0.0000, 0.0000});
    float2 _3083 = _3082.xy;
    type.sampled.image _3084 = SampledImage(_3081, _648);
    float4 _3085 = ImageSampleExplicitLod(_3084, _3083, Lod(0.0000));
    float _3086 = _3085.x;
    float3 _3087 = CompositeConstruct({_3086, _3086, _3086});
    float _3088 = _3085.y;
    float3 _3089 = {0.0400, 0.0400, 0.0400} * _3088;
    float3 _3090 = _3087 + _3089;
    float _3091 = 1.0000 - _3077;
    type.cube.image _3092 = *specular_cube;
    uint2 _3093 = ImageQuerySizeLod(_3092, 0);
    uint _3094 = _3093.x;
    int _3095 = Bitcast(_3094);
    float _3096 = _3091 * _3091;
    float _3097 = 1.5708 / _3096;
    float _3098 = ConvertSToF(_3095);
    float _3099 = _3098 / _3097;
    float _3100 = GLSL.std.450::Log2(_3099);
    type.sampler _3101 = *SamplerLinearClampNoBias;
    float _3102 = _3075.x;
    float _3103 = _3075.y;
    float _3104 = _3075.z;
    float4 _3105 = CompositeConstruct({_3102, _3103, _3104, _3100});
    float3 _3106 = _3105.xyz;
    type.sampled.image _3107 = SampledImage(_3092, _3101);
    float4 _3108 = ImageSampleExplicitLod(_3107, _3106, Lod(_3100));
    float3 _3109 = _3108.xyz;
    float3 _3110 = _3109 * _3090;
    float3 _3111 = _3110 * 1.0000;
    float* _3112 = &cpass_cb.cube_brightness.x;
    float _3113 = *_3112;
    float3 _3114 = {1.0000, 1.0000, 1.0000} * _3113;
    float* _3115 = &cpass_cb.direct_light_env_ratio;
    float _3116 = *_3115;
    float3 _3117 = _3063 * _3116;
    float3 _3118 = _3114 + _3117;
    float* _3119 = &cpass_cb.cube_brightness.w;
    float _3120 = *_3119;
    float _3121 = 1.0000 + _3120;
    float3 _3122 = _3118 * _3121;
    float3 _3123 = _3111 * _3122;
    float3 _3124 = _3123 * _3076;
    float3 _3125 = _3062 + _3124;
  }

  float3 _3126 = Phi(_3062, _3125);
  float* _3127 = &cpass_cb.cube_brightness.x;
  float _3128 = *_3127;
  float3 _3129 = {1.0000, 1.0000, 1.0000} * _3128;
  float* _3130 = &cpass_cb.direct_light_env_ratio;
  float _3131 = *_3130;
  float3 _3132 = _3063 * _3131;
  float3 _3133 = _3129 + _3132;
  float* _3134 = &cpass_cb.cube_brightness.w;
  float _3135 = *_3134;
  float3 _3136 = CompositeConstruct({_3135, _3135, _3135});
  float3 _3137 = _3133 + _3136;
  float3 _3138 = _338.xyz;
  float3 _3139 = _3138 + _788;
  float _3140 = _794.x;
  float _3141 = _794.y;
  float _3142 = _794.z;
  float4 _3143 = CompositeConstruct({_3140, _3141, _3142, 0.0000});
  float4x4* _3144 = &cpass_cb.env_map_rotation;
  float4x4 _3145 = *_3144;
  float4 _3146 = _3145 * _3143;
  uint* _3147 = &cpass_cb.diffuse_cube_enabled;
  uint _3148 = *_3147;
  bool _3149 = _3148 != 0;
  
  if(_3149) {
    type.cube.image _3152 = *diffuse_cube;
    type.sampler _3153 = *SamplerLinearClampNoBias;
    float _3154 = _3146.x;
    float _3155 = _3146.y;
    float _3156 = _3146.z;
    float4 _3157 = CompositeConstruct({_3154, _3155, _3156, 0.0000});
    float3 _3158 = _3157.xyz;
    type.sampled.image _3159 = SampledImage(_3152, _3153);
    float4 _3160 = ImageSampleExplicitLod(_3159, _3158, Lod(0.0000));
    float3 _3161 = _3160.xyz;
    float3 _3162 = _3161 * _3137;
    float3 _3163 = _3162 * _3139;
    float _3164 = _853.w;
    float3 _3165 = _3163 * _3164;
  }

  float3 _3166 = Phi({0.0000, 0.0000, 0.0000}, _3165);
  float3 _3167 = _3061 + _790;
  float _3168 = _3126.x;
  float _3169 = _3126.y;
  float _3170 = _3126.z;
  float _3171 = GLSL.std.450::NMax(_3169, _3170);
  float _3172 = GLSL.std.450::NMax(_3168, _3171);
  float _3173 = GLSL.std.450::NMax(10.0000, _3172);
  float _3174 = _3173 * 0.1000;
  float3 _3175 = CompositeConstruct({_3174, _3174, _3174});
  float3 _3176 = _3126 / _3175;
  float3 _3177 = GLSL.std.450::NMax({0.0000, 0.0000, 0.0000}, _3176);
  float3 _3178 = _853.xyz;
  float3 _3179 = _3178 * _3139;
  float3 _3180 = _3179 + _3166;
  float3 _3181 = _3180 + _3177;
  float3 _3182 = _3181 + _3060;
  float3 _3183 = _3167 + _3182;
  float _3184 = _275.x;
  float _3185 = _275.y;
  float _3186 = _275.z;
  float4 _3187 = CompositeConstruct({_3184, _3185, _3186, 1.0000});
  uint* _3188 = &cpass_cb.fog_exp_enabled;
  uint _3189 = *_3188;
  bool _3190 = _3189 != 0;
  [[DontFlatten]]
  if(_3190) {
    float* _3193 = &cpass_cb.fog_vals_exp.z;
    float _3194 = *_3193;
    bool _3195 = _3194 > 0.0000;
    [[DontFlatten]]
    if(_3195) {
      float _3199 = _304.z;
      float* _3200 = &cpass_cb.fog_vals_exp.x;
      float _3201 = *_3200;
      float _3202 = _3199 + _3201;
    } else {
      float* _3203 = &cpass_cb.fog_vals_exp.x;
      float _3204 = *_3203;
    }

    float _3205 = Phi(_3202, _3204);
    float* _3206 = &cpass_cb.fog_vals_exp.y;
    float _3207 = *_3206;
    float3 _3208 = _3187.xyz;
    float3 _3209 = _3208 - _304;
    float _3210 = _3186 - _3205;
    float _3211 = _3209.z;
    float _3212 = GLSL.std.450::FAbs(_3211);
    float _3213 = _3210 / _3212;
    float _3214 = GLSL.std.450::FClamp(_3213, 0.0000, 1.0000);
    float _3215 = GLSL.std.450::Length(_3209);
    float _3216 = _3215 * _3214;
    float _3217 = _3216 / _3207;
    float _3218 = GLSL.std.450::FClamp(_3217, 0.0000, 1.0000);
    float* _3219 = &cpass_cb.fog_vals_exp.w;
    float _3220 = *_3219;
    float _3221 = GLSL.std.450::Pow(_3218, _3220);
    float _3222 = GLSL.std.450::FClamp(_3221, 0.0000, 1.0000);
    float3* _3223 = &cpass_cb.fog_colour_exp;
    float3 _3224 = *_3223;
    float3 _3225 = _3224 * _3222;
    float _3226 = _3225.x;
    float _3227 = _3225.y;
    float _3228 = _3225.z;
    float4 _3229 = CompositeConstruct({_3226, _3227, _3228, _3222});
    float4 _3230 = GLSL.std.450::FClamp(_3229, {0.0000, 0.0000, 0.0000, 0.0000}, {1.0000, 1.0000, 1.0000, 1.0000});
  }

  float4 _3231 = Phi({0.0000, 0.0000, 0.0000, 0.0000}, _3230);
  uint* _3232 = &cpass_cb.fog_linear_enabled;
  uint _3233 = *_3232;
  bool _3234 = _3233 != 0;
  [[DontFlatten]]
  if(_3234) {
    float* _3237 = &cpass_cb.fog_vals_linear.z;
    float _3238 = *_3237;
    bool _3239 = _3238 > 0.0000;
    [[DontFlatten]]
    if(_3239) {
      float _3243 = _304.z;
      float* _3244 = &cpass_cb.fog_vals_linear.x;
      float _3245 = *_3244;
      float _3246 = _3243 + _3245;
    } else {
      float* _3247 = &cpass_cb.fog_vals_linear.x;
      float _3248 = *_3247;
    }

    float _3249 = Phi(_3246, _3248);
    float* _3250 = &cpass_cb.fog_vals_linear.y;
    float _3251 = *_3250;
    float3 _3252 = _3187.xyz;
    float3 _3253 = _3252 - _304;
    float _3254 = _3186 - _3249;
    float _3255 = _3253.z;
    float _3256 = GLSL.std.450::FAbs(_3255);
    float _3257 = _3254 / _3256;
    float _3258 = GLSL.std.450::FClamp(_3257, 0.0000, 1.0000);
    float _3259 = GLSL.std.450::Length(_3253);
    float _3260 = _3259 * _3258;
    float _3261 = _3260 / _3251;
    float _3262 = GLSL.std.450::FClamp(_3261, 0.0000, 1.0000);
    float3 _3263 = _3231.xyz;
    float3* _3264 = &cpass_cb.fog_colour_linear;
    float3 _3265 = *_3264;
    float3 _3266 = _3265 * _3262;
    float3 _3267 = _3263 + _3266;
    float _3268 = _3231.w;
    float _3269 = _3268 + _3262;
    float _3270 = _3267.x;
    float _3271 = _3267.y;
    float _3272 = _3267.z;
    float4 _3273 = CompositeConstruct({_3270, _3271, _3272, _3269});
    float4 _3274 = GLSL.std.450::FClamp(_3273, {0.0000, 0.0000, 0.0000, 0.0000}, {1.0000, 1.0000, 1.0000, 1.0000});
  }

  float4 _3275 = Phi(_3231, _3274);
  float3 _3276 = _3183.xyz;
  float _3277 = _3275.w;
  float _3278 = 1.0000 - _3277;
  float3 _3279 = _3276 * _3278;
  float3 _3280 = _3275.xyz;
  float3 _3281 = _3279 + _3280;
  float _3282 = _3281.x;
  float _3283 = _3281.y;
  float _3284 = _3281.z;
  float4 _3285 = CompositeConstruct({_3282, _3283, _3284, _428});
  float3 _3286 = _278 - _271;
  float4x4* _3287 = &cpass_cb.last_view_projection_transform;
  float4x4 _3288 = *_3287;
  float4 _3289 = float4(_3286.x, _3286.y, _3286.z, float4(Undef).w);
  float4 _3290 = CompositeInsert(1.0000, _3289, {3});
  float4 _3291 = _3288 * _3290;
  float _3292 = _3291.w;
  float4 _3293 = CompositeConstruct({_3292, _3292, _3292, _3292});
  float4 _3294 = _3291 / _3293;
  float2 _3295 = _3294.xy;
  float2 _3296 = _3295 * 0.5000;
  float2 _3297 = _3296 + {0.5000, 0.5000};
  float _3298 = _3297.y;
  float _3299 = 1.0000 - _3298;
  float _3300 = _3297.x;
  float3 _3301 = CompositeConstruct({_3300, _3299, float(Undef)});
  float3 _3302 = _810 - _3301;
  float2 _3303 = _813 * _829;
  float2 _3304 = _3303 + {0.5000, 0.5000};
  uint2 _3305 = ConvertFToU(_3304);
  int2 _3306 = Bitcast(_3305);
  int _3307 = _3306.x;
  int _3308 = _3306.y;
  int3 _3309 = CompositeConstruct({_3307, _3308, 0});
  float3 _3310 = ConvertSToF(_3309);
  float3 _3311 = _3302 * _3310;
  float4 _3312 = GLSL.std.450::FClamp(_3285, {0.0000, 0.0000, 0.0000, 0.0000}, {1.0000, 1.0000, 1.0000, 1.0000});
  float3 _3313 = _3167 * {0.2000, 0.2000, 0.2000};
  float _3314 = _3313.x;
  float _3315 = _3313.y;
  float _3316 = _3313.z;
  float4 _3317 = CompositeConstruct({_3314, _3315, _3316, _428});
  uint* _3318 = &cpass_cb.ssgi_detail;
  uint _3319 = *_3318;
  bool _3320 = _3319 != 0;
  bool _3321 = !_3320;
  bool _3322 = CompositeConstruct({_3321, _3321, _3321});
  float3 _3323 = Select(_3322, _315, _794);
  float3 _3324 = _3323 * 0.5000;
  float3 _3325 = _3324 + {0.5000, 0.5000, 0.5000};
  float4 _3326 = float4(_3325.x, _3325.y, _3325.z, {0.0000, 0.0000, 0.0000, 0.0000}.w);
  float4 _3327 = CompositeInsert(_428, _3326, {3});
  float _3328 = _3311.x;
  float _3329 = _3311.y;
  float4 _3330 = CompositeConstruct({_3328, _3329, 0.0000, 0.0000});
  *out.var.SV_TARGET = _3312;
  *out.var.SV_TARGET2 = _3317;
  *out.var.SV_TARGET3 = _3327;
  *out.var.SV_TARGET1 = _3330;
  return;
}


